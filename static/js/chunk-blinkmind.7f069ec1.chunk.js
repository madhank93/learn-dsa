(window["webpackJsonpreact-mindmap"]=window["webpackJsonpreact-mindmap"]||[]).push([[0],{293:function(e,t,n){e.exports=n.p+"static/media/default.4f8c4983.jpg"},294:function(e,t,n){e.exports=n.p+"static/media/theme1.2f59f00b.jpg"},295:function(e,t,n){e.exports=n.p+"static/media/theme2.b18193fb.jpg"},296:function(e,t,n){e.exports=n.p+"static/media/theme3.61c97910.jpg"},297:function(e,t,n){e.exports=n.p+"static/media/theme4.1e21408c.jpg"},349:function(e,t,n){},356:function(e,t,n){},850:function(e,t,n){},871:function(e,t,n){},872:function(e,t,n){},873:function(e,t,n){},874:function(e,t,n){"use strict";n.r(t);var o=n(0),r=n.n(o),i=n(14),c=n.n(i),a=(n(349),n(44)),l=n(45),u=n(51),p=n(50),s=n(83),d=n(7),f=n(16),y=n.n(f),m=n(73),h=n(2),g=n(21),b=n(49),v=n(103),x=n(3),O=n(102),T=function(e,t){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function E(e,t){function n(){this.constructor=e}T(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var k=function(){return(k=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function w(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)c.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return c}function C(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(w(arguments[t]));return e}y()("core:controller");function S(e){var t,n;if(!Array.isArray(e))throw new TypeError("Middleware stack must be an array!");try{for(var o=function(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}(e),r=o.next();!r.done;r=o.next()){if("function"!==typeof r.value)throw new TypeError("Middleware must be composed of functions!")}}catch(i){t={error:i}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return function(t,n){var o=-1;return function r(i){if(i<=o)throw new Error("next() called multiple times");o=i;var c=e[i];i===e.length&&(c=n);if(!c)return null;try{return c(t,r.bind(null,i+1))}catch(a){throw a}}(0)}}var j,R=function(){function e(e){void 0===e&&(e={});var t=e.plugins,n=void 0===t?[]:t,o=e.onChange,r=e.readOnly;this.readOnly=r,this.onChange=o,this.middleware=new Map,function e(t,n){if(Array.isArray(n))n.forEach((function(n){return e(t,n)}));else if(null!=n)for(var o in n){var r=n[o];t.middleware[o]=t.middleware[o]||[],t.middleware[o].push(r)}}(this,function(e){void 0===e&&(e={});var t=e.plugins;return C(void 0===t?[]:t)}({plugins:n}))}return e.prototype.run=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var o=this.middleware,r=o[e]||[];Object(v.a)(0!==r.length,"the middleware function "+e+" is not found!");var i=Object(b.a)(S)(r);return i.apply(void 0,C(t))},e.prototype.getValue=function(e,t){return this.run("getValue",k(k({},t),{propKey:e}))},e.prototype.change=function(e,t){this.onChange(e,t),this.currentModel=e},e}(),K="L",D="R",L="M";!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",e[e.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM"}(j||(j={}));var _=0,M=1,I="CONTENT",P="DESC",z="NORMAL",F="EDITING_CONTENT",N="EDITING_DESC",A="SHOW_POPUP",B="DRAGGING",V="ANCESTOR",H="DESCENDANT",W="SIBLING",G="NONE",U="TOGGLE_COLLAPSE",Z="COLLAPSE_ALL",Y="EXPAND_ALL",J="EXPAND_TO",q="ADD_CHILD",X="ADD_SIBLING",Q="DELETE_TOPIC",$="FOCUS_TOPIC",ee="SET_FOCUS_MODE",te="SET_STYLE",ne="SET_THEME",oe="SET_TOPIC_BLOCK",re="DELETE_TOPIC_BLOCK",ie="START_EDITING_CONTENT",ce="START_EDITING_DESC",ae="DRAG_AND_DROP",le="SET_EDITOR_ROOT";function ue(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var pe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),Object.defineProperty(t.prototype,"data",{get:function(){return this.get("data")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this.get("type")},enumerable:!0,configurable:!0}),t.create=function(e){return new t(e)},t.createList=function(e){if(x.List.isList(e)||Array.isArray(e))return Object(x.List)(e.map(t.create));throw new Error("Block.createList only accepts Array or List, but you passed it: "+e)},t}(Object(x.Record)({type:null,key:null,data:null})),se=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),Object.defineProperty(t.prototype,"key",{get:function(){return this.get("key")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentKey",{get:function(){return this.get("parentKey")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"collapse",{get:function(){return this.get("collapse")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subKeys",{get:function(){return this.get("subKeys")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"blocks",{get:function(){return this.get("blocks")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"relations",{get:function(){return this.get("relations")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"style",{get:function(){return this.get("style")},enumerable:!0,configurable:!0}),t.prototype.getBlock=function(e){var t=this.blocks.findIndex((function(t){return t.type===e}));return-1===t?{index:t,block:null}:{index:t,block:this.blocks.get(t)}},t.fromJSON=function(e){var n=e.key,o=e.parentKey,r=void 0===o?null:o,i=e.blocks,c=e.subKeys,a=void 0===c?[]:c,l=e.collapse;return new t({key:n,parentKey:r,collapse:void 0!==l&&l,subKeys:Object(x.List)(a),blocks:pe.createList(i)})},t.create=function(e){var n=e.key,o=e.parentKey,r=void 0===o?null:o,i=e.content,c=void 0===i?"":i,a=e.subKeys,l=void 0===a?[]:a,u=e.collapse,p=void 0!==u&&u,s=pe.create({type:I,data:c,key:null});return new t({key:n,parentKey:r,blocks:Object(x.List)([s]),subKeys:Object(x.List)(l),collapse:p})},t}(Object(x.Record)({key:null,parentKey:null,collapse:!1,subKeys:null,blocks:null,relations:null,style:null}));function de(e,t){var n=e.getTopic(t),o=[];if(n.subKeys.size>0){var r=n.subKeys.toArray();o.push.apply(o,C(r)),o=r.reduce((function(t,n){return t.push.apply(t,C(de(e,n))),t}),o)}return o}function fe(e,t,n){var o=e.getTopic(t),r=e.getTopic(n);if(o&&r){if(o.parentKey==r.parentKey)return W;for(var i=o;i.parentKey;){if(i.parentKey===r.key)return H;i=e.getParentTopic(i.key)}for(i=r;i.parentKey;){if(i.parentKey===o.key)return V;i=e.getParentTopic(i.key)}}return G}var ye=y()("modifier");function me(e){var t=e.model,n=e.topicKey,o=e.focusMode;return ye("focus topic"),n!==t.focusKey&&(t=t.set("focusKey",n)),o!==t.focusMode&&(t=t.set("focusMode",o)),t}var he={addChild:function(e){var t=e.model,n=e.topicKey;ye("addChild:",n);var o=t.getTopic(n);if(o){var r=se.create({key:ue(),parentKey:o.key});return o=o.set("collapse",!1).update("subKeys",(function(e){return e.push(r.key)})),me({model:t=t.update("topics",(function(e){return e.set(n,o).set(r.key,r)})),topicKey:r.key,focusMode:F})}return t},addSibling:function(e){var t=e.model,n=e.topicKey;if(n===t.rootTopicKey)return t;var o=t.getTopic(n);if(o){var r=t.getTopic(o.parentKey),i=r.subKeys.indexOf(n),c=se.create({key:ue(),parentKey:r.key});return me({model:t=t.update("topics",(function(e){return e.set(c.key,c)})).updateIn(["topics",r.key,"subKeys"],(function(e){return e.insert(i+1,c.key)})),topicKey:c.key,focusMode:F})}return t},toggleCollapse:function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n);return o&&0!==o.subKeys.size&&(o=o.merge({collapse:!o.collapse}),t=t.updateIn(["topics",o.key,"collapse"],(function(e){return!e}))),t=me({model:t,topicKey:n,focusMode:z})},collapseAll:function(e){var t=e.model;ye("collapseAll");var n=de(t,t.editorRootTopicKey);return ye(t),t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!0)}))})),ye(t),t},expandAll:function(e){var t=e.model,n=de(t,t.editorRootTopicKey);return ye(t),t=t.withMutations((function(e){n.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),ye(t),t},expandTo:function(e){var t=e.model,n=e.topicKey,o=function(e,t,n){void 0===n&&(n=!1);for(var o=[t],r=e.getTopic(t);r.parentKey;)n?o.push(r.parentKey):o.unshift(r.parentKey),r=e.getParentTopic(r.key);return o}(t,n).filter((function(e){return e!==n}));return fe(t=t.withMutations((function(e){o.forEach((function(t){e.setIn(["topics",t,"collapse"],!1)}))})),n,t.editorRootTopicKey)!==H&&(t=t.set("editorRootTopicKey",t.rootTopicKey)),t},focusTopic:me,setFocusMode:function(e){var t=e.model,n=e.focusMode;return ye("setFocusMode"),n!==t.focusMode&&(t=t.set("focusMode",n)),t},deleteTopic:function(e){var t=e.model,n=e.topicKey;if(n===t.editorRootTopicKey)return t;var o=t.getTopic(n);return o&&(t=t.withMutations((function(e){e.update("topics",(function(e){e=e.delete(n);var o=de(t,n);return e=e.withMutations((function(e){o.forEach((function(t){e.delete(t)}))}))})),e.updateIn(["topics",o.parentKey,"subKeys"],(function(e){return e.delete(e.indexOf(n))})),e.focusKey===n&&e.set("focusKey",null).set("focusMode",null)}))),t},setBlockData:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=e.focusMode,i=e.data,c=t.getTopic(n);if(c){var a=c.getBlock(o),l=a.index,u=a.block;-1===l?t=t.updateIn(["topics",n,"blocks"],(function(e){return e.push(pe.create({type:o,data:i}))})):u.data!==i&&(t=t.updateIn(["topics",n,"blocks",l,"data"],(function(e){return i}))),r&&(t=me({model:t,topicKey:n,focusMode:r}))}return t},deleteBlock:function(e){var t=e.model,n=e.topicKey,o=e.blockType,r=t.getTopic(n);if(r){var i=r.getBlock(o).index;-1!==i&&(t=t.updateIn(["topics",n,"blocks"],(function(e){return e.delete(i)}))),t=me({model:t,topicKey:null,focusMode:null})}return t},setStyle:function(e){var t=e.model,n=e.topicKey,o=e.style,r=t.getTopic(n);return r&&o!==r.style&&(t=t.updateIn(["topics",n,"style"],(function(e){return o}))),t},setTheme:function(e){var t=e.model,n=e.theme;return t=t.setIn(["config","theme"],n)},setLayoutDir:function(e){var t=e.model,n=e.layoutDir;return t.config.layoutDir===n?t:t=t.setIn(["config","layoutDir"],n)},setEditorRootTopicKey:function(e){var t=e.model,n=e.topicKey;return t.editorRootTopicKey!==n&&(t=t.set("editorRootTopicKey",n)),t.getTopic(n).collapse&&(t=t.setIn(["topics",n,"collapse"],!1)),t},setZoomFactor:function(e){var t=e.model,n=e.zoomFactor;return t.zoomFactor!==n&&(t=t.set("zoomFactor",n)),t}};var ge,be={name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"34px",borderRadius:"35px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},primaryTopic:{contentStyle:{borderWidth:"1px",borderStyle:"solid",borderRadius:"20px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},normalTopic:{contentStyle:{border:"1px solid #e8eaec",borderRadius:"20px",fontSize:"17px",padding:"4px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"white"}}},ve={readOnly:!1,allowUndo:!0,layoutDir:j.LEFT_AND_RIGHT,theme:be},xe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),Object.defineProperty(t.prototype,"layoutDir",{get:function(){return this.get("layoutDir")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return this.get("readOnly")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowUndo",{get:function(){return this.get("allowUndo")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"theme",{get:function(){return this.get("theme")},enumerable:!0,configurable:!0}),t.fromJSON=function(e){return new t(e)},t}(Object(x.Record)(ve)),Oe={topics:Object(x.Map)(),extData:Object(x.Map)(),config:null,rootTopicKey:null,editorRootTopicKey:null,focusKey:null,focusMode:null,formatVersion:null,zoomFactor:1},Te=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.isModel=function(e){return e instanceof t},t.create=function(e){if(void 0===e&&(e=null),null==e)return t.createEmpty();var n;if(t.isModel(e)&&(n=e),Object(O.a)(e)&&(n=t.fromJSON(e)),n)return null==n.focusKey&&(n=n.set("focusKey",n.rootTopicKey)),null==n.focusMode&&(n=n.set("focusMode",z)),n;throw new Error("`Value.create` only accepts objects or values, but you passed it: "+e)},t.createEmpty=function(){var e=new t,n=se.create({key:ue()});return e.update("topics",(function(e){return e.set(n.key,n)})).set("rootTopicKey",n.key).set("focusKey",n.key).set("focusMode",z)},t.fromJSON=function(e){var n=new t,o=e.topics,r=void 0===o?[]:o,i=e.config,c=void 0===i?{}:i,a=e.rootTopicKey,l=e.editorRootTopicKey;return void 0===l&&(l=a),n=(n=n.merge({rootTopicKey:a,editorRootTopicKey:l})).withMutations((function(e){r.forEach((function(t){e.update("topics",(function(e){return e.set(t.key,se.fromJSON(t))}))})),e.set("config",xe.fromJSON(c))}))},t.prototype.toJS=function(){return{rootTopicKey:this.rootTopicKey,topics:Object.values(this.topics.toJS()),config:this.config,extData:this.extData,zoomFactor:this.zoomFactor}},Object.defineProperty(t.prototype,"extData",{get:function(){return this.get("extData")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topics",{get:function(){return this.get("topics")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"config",{get:function(){return this.get("config")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formatVersion",{get:function(){return this.get("formatVersion")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rootTopicKey",{get:function(){return this.get("rootTopicKey")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorRootTopicKey",{get:function(){return this.get("editorRootTopicKey")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusKey",{get:function(){return this.get("focusKey")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"focusMode",{get:function(){return this.get("focusMode")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editingContentKey",{get:function(){return this.focusMode===F?this.focusKey:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editingDescKey",{get:function(){return this.focusMode===N?this.focusKey:null},enumerable:!0,configurable:!0}),t.prototype.getTopic=function(e){return this.topics.get(e)},t.prototype.getExtDataItem=function(e,t){return this.extData.get(e)||new t},t.prototype.getParentTopic=function(e){var t=this.getTopic(e);return t.parentKey?this.getTopic(t.parentKey):null},t.prototype.getTopicVisualLevel=function(e){for(var t=this.getTopic(e),n=0;t&&t.key!==this.editorRootTopicKey;)n++,t=this.getParentTopic(t.key);return n},Object.defineProperty(t.prototype,"rootTopic",{get:function(){return this.getTopic(this.rootTopicKey)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zoomFactor",{get:function(){return this.get("zoomFactor")},enumerable:!0,configurable:!0}),t}(Object(x.Record)(Oe)),Ee=(n(356),n(357),n(32));n(274),n(111);!function(e){e[e.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",e[e.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT",e[e.LEFT_AND_RIGHT=2]="LEFT_AND_RIGHT",e[e.TOP_TO_BOTTOM=3]="TOP_TO_BOTTOM"}(ge||(ge={}));var ke="CONTENT",we="DESC",Ce="NORMAL",Se="EDITING_CONTENT",je="EDITING_DESC",Re="SET_TOPIC_BLOCK",Ke=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"data",get:function(){return this.get("data")}},{key:"type",get:function(){return this.get("type")}}],[{key:"create",value:function(e){return new n(e)}},{key:"createList",value:function(e){if(x.List.isList(e)||Array.isArray(e))return Object(x.List)(e.map(n.create));throw new Error("Block.createList only accepts Array or List, but you passed it: ".concat(e))}}]),n}(Object(x.Record)({type:null,key:null,data:null}));var De={readOnly:!1,allowUndo:!0,layoutDir:ge.LEFT_AND_RIGHT,theme:{name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"34px",borderRadius:"35px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},primaryTopic:{contentStyle:{borderWidth:"1px",borderStyle:"solid",borderRadius:"20px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"rgb(113, 203, 45)"}},normalTopic:{contentStyle:{border:"1px solid #e8eaec",borderRadius:"20px",fontSize:"17px",padding:"4px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"3px",lineColor:"white"}}}},Le=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"layoutDir",get:function(){return this.get("layoutDir")}},{key:"readOnly",get:function(){return this.get("readOnly")}},{key:"allowUndo",get:function(){return this.get("allowUndo")}},{key:"theme",get:function(){return this.get("theme")}}],[{key:"fromJSON",value:function(e){return new n(e)}}]),n}(Object(x.Record)(De));function _e(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var Me=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"key",get:function(){return this.get("key")}},{key:"parentKey",get:function(){return this.get("parentKey")}},{key:"collapse",get:function(){return this.get("collapse")}},{key:"subKeys",get:function(){return this.get("subKeys")}},{key:"blocks",get:function(){return this.get("blocks")}},{key:"relations",get:function(){return this.get("relations")}},{key:"style",get:function(){return this.get("style")}},{key:"getBlock",value:function(e){var t=this.blocks.findIndex((function(t){return t.type===e}));return-1===t?{index:t,block:null}:{index:t,block:this.blocks.get(t)}}}],[{key:"fromJSON",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,i=e.blocks,c=e.subKeys,a=void 0===c?[]:c,l=e.collapse;return new n({key:t,parentKey:r,collapse:void 0!==l&&l,subKeys:Object(x.List)(a),blocks:Ke.createList(i)})}},{key:"create",value:function(e){var t=e.key,o=e.parentKey,r=void 0===o?null:o,i=e.content,c=void 0===i?"":i,a=e.subKeys,l=void 0===a?[]:a,u=e.collapse,p=void 0!==u&&u,s=Ke.create({type:ke,data:c,key:null});return new n({key:t,parentKey:r,blocks:Object(x.List)([s]),subKeys:Object(x.List)(l),collapse:p})}}]),n}(Object(x.Record)({key:null,parentKey:null,collapse:!1,subKeys:null,blocks:null,relations:null,style:null}));y()("modifier");var Ie={topics:Object(x.Map)(),extData:Object(x.Map)(),config:new Le,rootTopicKey:null,editorRootTopicKey:null,focusKey:null,focusMode:null,formatVersion:null,zoomFactor:1};Object(x.Record)(Ie);y()("core:controller");var Pe=n(70),ze=n(31),Fe=function(e,t){return(Fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Ne(e,t){function n(){this.constructor=e}Fe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ae=function(){return(Ae=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};var Be,Ve,He,We=y()("node:text-editor"),Ge=d.default.div(He||(Be=["\n  padding: 6px;\n  background-color: ",";\n  cursor: ",";\n  min-width: 50px;\n"],Ve=["\n  padding: 6px;\n  background-color: ",";\n  cursor: ",";\n  min-width: 50px;\n"],Object.defineProperty?Object.defineProperty(Be,"raw",{value:Ve}):Be.raw=Ve,He=Be),(function(e){return e.readOnly?null:"white"}),(function(e){return e.readOnly?"pointer":"text"})),Ue=function(e){function t(t){var n=e.call(this,t)||this;return n.state={content:null},n.onMouseDown=function(e){e.stopPropagation()},n.onMouseMove=function(e){},n.onKeyDown=function(e){},n._handleClick=function(e){!n.root.contains(e.target)&&n.onClickOutSide(e)},n.rootRef=function(e){return function(t){e(t),n.root=t}},n.initState(),n}return Ne(t,e),t.prototype.onChange=function(e){var t=e.value;We("onChange",t),this.setState({content:t})},t.prototype.componentDidMount=function(){this.props.readOnly||document.addEventListener("click",this._handleClick)},t.prototype.componentWillUnmount=function(){this.props.readOnly||document.removeEventListener("click",this._handleClick)},t.prototype.onClickOutSide=function(e){},t.prototype.getCustomizeProps=function(){return null},t.prototype.getContent=function(){var e=this.getCustomizeProps().block.data;return null==e?null:("string"===typeof e&&(e=Pe.a.deserialize(e)),e)},t.prototype.initState=function(){var e=this.getContent();this.state={content:e}},t.prototype.render=function(){var e=this.props,t=e.topicKey,n=e.saveRef,r=this.getCustomizeProps(),i=r.readOnly,c=r.getRefKeyFunc,a=r.placeholder,l=r.style;We(i);var u=c(t),p=i?this.getContent():this.state.content,s=this.onMouseDown,d=this.onMouseMove,f=this.onKeyDown,y={value:p,readOnly:i,onChange:this.onChange.bind(this),placeholder:a,style:l},m={key:u,readOnly:i,ref:this.rootRef(n(u)),onMouseDown:s,onMouseMove:d,onKeyDown:f};return Object(o.createElement)(Ge,Ae({},m),Object(o.createElement)(ze.Editor,Ae({},y,{autoFocus:!0})))},t}(o.PureComponent),Ze=y()("node:topic-content-editor");function Ye(e){return"content-editor-"+e}var Je=function(e){function t(t){var n=e.call(this,t)||this;return n.onKeyDown=function(e){e.nativeEvent.ctrlKey&&"Enter"===e.nativeEvent.code&&n.save()},n}return Ne(t,e),t.prototype.getCustomizeProps=function(){var e=this.props,t=e.model,n=e.topicKey,o=e.readOnly;return{block:t.getTopic(n).getBlock(ke).block,readOnly:o,getRefKeyFunc:Ye,placeholder:"new",style:{whiteSpace:"pre"}}},t.prototype.onClickOutSide=function(e){Ze("onClickOutSide"),this.save()},t.prototype.save=function(){var e=this.props,t=e.model,n=e.topicKey;t.editingContentKey!==n||this.props.controller.run("operation",Ae(Ae({},this.props),{opType:Re,blockType:ke,data:this.state.content,focusMode:Ce}))},t}(Ue),qe=y()("node:topic-desc-editor");function Xe(e){return"desc-editor-"+e}var Qe=function(e){function t(t){var n=e.call(this,t)||this;return qe("constructor"),n}return Ne(t,e),t.prototype.initState=function(){e.prototype.initState.call(this);var t=this.props,n=t.controller,o="topic-desc-data-"+t.topicKey,r=this.state.content;n.run("setTempValue",{key:o,value:r})},t.prototype.getCustomizeProps=function(){var e=this.props,t=e.model,n=e.topicKey;return{block:t.getTopic(n).getBlock(we).block,readOnly:t.editingDescKey!==n,getRefKeyFunc:Xe,placeholder:"write topic notes here"}},t.prototype.onChange=function(e){var t=e.value;qe("onChange");var n=this.props,o=n.controller,r=n.topicKey;if(!(n.model.editingDescKey!==r)){var i="topic-desc-data-"+r;o.run("setTempValue",{key:i,value:t}),this.setState({content:t})}},t}(Ue);var $e=function(){return{getTopicTitle:function(e){var t=e.model,n=e.controller,o=e.topicKey,r=e.maxLength,i=t.getTopic(o).getBlock(ke).block,c=n.run("serializeBlockData",Ae(Ae({},e),{block:i}));return null!=r&&(c=c.length>r?c.substr(0,r)+"...":c),c},renderTopicContentEditor:function(e){return Object(o.createElement)(Je,Ae({},e))},renderTopicDescEditor:function(e){return Object(o.createElement)(Qe,Ae({},e))},isBlockEmpty:function(e,t){var n=e.block,o=e.controller;return n.type===ke||n.type===we?null==n.data||""===o.run("serializeBlockData",e):t()},serializeBlockData:function(e,t){var n=e.block;return n.type===ke||n.type===we?"string"===typeof n.data?n.data:Pe.a.serialize(n.data):t()}}},et=n(9),tt=n.n(et),nt=n(880),ot=n(298),rt=n(41),it=function(e,t){return(it=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function ct(e,t){function n(){this.constructor=e}it(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var at=function(){return(at=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function lt(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]])}return n}function ut(e,t,n,o){var r,i=arguments.length,c=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)c=Reflect.decorate(e,t,n,o);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(c=(i<3?r(c):i>3?r(t,n,c):r(t,n))||c);return i>3&&c&&Object.defineProperty(t,n,c),c}function pt(e){var t="function"===typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function st(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)c.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return c}function dt(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(st(arguments[t]));return e}function ft(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var yt,mt,ht,gt,bt,vt,xt,Ot,Tt,Et,kt,wt,Ct,St=function(e){function t(t){return e.call(this,t)||this}return ct(t,e),t.prototype.operation=function(e,t){this.props.controller.run("operation",at({opType:e},t))},t.prototype.run=function(e,t){this.props.controller.run(e,t)},Object.defineProperty(t.prototype,"topic",{get:function(){return this.props.model.getTopic(this.props.topicKey)},enumerable:!0,configurable:!0}),t}(o.PureComponent),jt=y()("node:drag-scroll-widget"),Rt=d.default.div(yt||(yt=ft(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n"],["\n  position: relative;\n  width: 100%;\n  height: 100%;\n  overflow: scroll;\n"]))),Kt=d.default.div(mt||(mt=ft(["\n  position: relative;\n  width: max-content;\n"],["\n  position: relative;\n  width: max-content;\n"]))),Dt=function(e){function t(t){var n=e.call(this,t)||this;return n.contentResizeCallback=function(e,t){if(n.oldContentRect){var o={width:n.content.clientWidth+2*n.viewBox.clientWidth,height:n.content.clientHeight+2*n.viewBox.clientHeight};n.bigView.style.width=o.width+"px",n.bigView.style.height=o.height+"px"}n.oldContentRect=e[0].contentRect},n.contentResizeObserver=new s.a(n.contentResizeCallback),n.contentRef=function(e){e&&(n.content=e,n.contentResizeObserver.observe(n.content))},n.viewBoxRef=function(e){e&&(n.viewBox=e,n.props.enableMouseWheel||(jt("addEventListener onwheel"),n.viewBox.addEventListener("wheel",(function(e){jt("onwheel"),(e.ctrlKey||e.altKey)&&e.preventDefault()}),{passive:!1})),n.setViewBoxScroll(n.viewBox.clientWidth,n.viewBox.clientHeight))},n.bigViewRef=function(e){e&&(n.bigView=e)},n.setWidgetStyle=function(){n.content&&n.viewBox&&n.bigView&&(n.bigView.style.width=2*(n.content.clientWidth+n.viewBox.clientWidth)+"px",n.bigView.style.height=2*(n.content.clientHeight+n.viewBox.clientHeight)+"px",n.content.style.left=n.viewBox.clientWidth+"px",n.content.style.top=n.viewBox.clientHeight+"px")},n.setViewBoxScroll=function(e,t){jt("setViewBoxScroll "+e+" "+t),n.viewBox&&(n.viewBox.scrollLeft=e,n.viewBox.scrollTop=t)},n.setViewBoxScrollDelta=function(e,t){jt("setViewBoxScrollDelta "+e+" "+t),n.viewBox&&(n.viewBox.scrollLeft+=e,n.viewBox.scrollTop+=t)},n.onMouseDown=function(e){var t=n.props,o=t.mouseKey,r=t.needKeyPressed,i=t.canDragFunc;if((!i||i())&&(0===e.button&&"left"===o||2===e.button&&"right"===o)){if(r&&!e.ctrlKey)return;n._lastCoordX=n.viewBox.scrollLeft+e.nativeEvent.clientX,n._lastCoordY=n.viewBox.scrollTop+e.nativeEvent.clientY;var c=n.viewBox;c.addEventListener("mousemove",n.onMouseMove),c.addEventListener("mouseup",n.onMouseUp)}},n.onMouseUp=function(e){var t=n.viewBox;t.removeEventListener("mousemove",n.onMouseMove),t.removeEventListener("mouseup",n.onMouseUp)},n.onMouseMove=function(e){n.viewBox.scrollLeft=n._lastCoordX-e.clientX,n.viewBox.scrollTop=n._lastCoordY-e.clientY},n.handleContextMenu=function(e){e.preventDefault()},n.state={widgetStyle:{width:"10000px",height:"10000px"}},n}return ct(t,e),t.prototype.componentDidMount=function(){this.setWidgetStyle(),document.addEventListener("contextmenu",this.handleContextMenu)},t.prototype.componentWillUnmount=function(){document.removeEventListener("contextmenu",this.handleContextMenu)},t.prototype.setZoomFactor=function(e){this.bigView.style.transform="scale("+e+")",this.bigView.style.transformOrigin="50% 50%"},t.prototype.render=function(){var e=at({},this.state.widgetStyle);return Object(o.createElement)(Rt,{ref:this.viewBoxRef,onMouseDown:this.onMouseDown},Object(o.createElement)("div",{style:e,ref:this.bigViewRef},Object(o.createElement)(Kt,{ref:this.contentRef,style:this.state.contentStyle},this.props.children(this.setViewBoxScroll,this.setViewBoxScrollDelta))))},t.defaultProps={mouseKey:"left",needKeyPressed:!1},t}(o.Component),Lt=y()("node:save-ref"),_t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.getRef=function(e){return Lt(t),t[e]},t.saveRef=function(e){return function(n){n&&(t[e]=n,t.fireListener(e,n))}},t.deleteRef=function(e){Lt("deleteRef:",e),delete t[e]},t.observers=new Map,t.fireListener=function(e,n){var o,r;if(t.observers.has(e)){var i=t.observers.get(e);try{for(var c=pt(i),a=c.next();!a.done;a=c.next()){(0,a.value)(e,n)}}catch(l){o={error:l}}finally{try{a&&!a.done&&(r=c.return)&&r.call(c)}finally{if(o)throw o.error}}}},t.registerRefListener=function(e,n){t.observers.has(e)?t.observers.get(e).push(n):t.observers.set(e,[n])},t}return ct(t,e),t.prototype.render=function(){return this.props.children(this.saveRef,this.getRef,this.deleteRef,this.registerRefListener.bind(this))},t}(o.Component),Mt=d.default.div(ht||(ht=ft(["\n  display: flex;\n  flex-direction: ",";\n  align-items: ",";\n  justify-content: ",";\n"],["\n  display: flex;\n  flex-direction: ",";\n  align-items: ",";\n  justify-content: ",";\n"])),(function(e){return e.flexDirection?e.flexDirection:"row"}),(function(e){return e.alignItems}),(function(e){return e.justifyContent})),It=d.default.div(gt||(gt=ft(["\n  margin: ",";\n"],["\n  margin: ",";\n"])),(function(e){return e.margin})),Pt=d.default.a(bt||(bt=ft(["\n  font-size: 20px !important;\n"],["\n  font-size: 20px !important;\n"]))),zt=d.default.div(vt||(vt=ft(["\n  padding: 5px;\n  cursor: pointer;\n"],["\n  padding: 5px;\n  cursor: pointer;\n"]))),Ft=d.default.div(xt||(xt=ft(["\n  cursor: pointer;\n  &:hover {\n    color: #1ea7fd;\n  }\n"],["\n  cursor: pointer;\n  &:hover {\n    color: #1ea7fd;\n  }\n"]))),Nt=Object(d.default)(m.e)(Ot||(Ot=ft(["\n  margin-bottom: 0px !important;\n"],["\n  margin-bottom: 0px !important;\n"]))),At=Object(d.default)(Ft)(Tt||(Tt=ft(["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  //padding: 5px;\n"],["\n  position: absolute;\n  right: 5px;\n  top: 5px;\n  //padding: 5px;\n"]))),Bt=d.default.div(Et||(Et=ft(["\n  height: 16px;\n"],["\n  height: 16px;\n"]))),Vt=d.default.span(kt||(kt=ft(["\n  margin: 0px 10px;\n  &:hover {\n    color: palevioletred;\n  }\n"],["\n  margin: 0px 10px;\n  &:hover {\n    color: palevioletred;\n  }\n"]))),Ht=d.default.div(wt||(wt=ft(["\n  z-index: ",";\n"],["\n  z-index: ",";\n"])),(function(e){return e.zIndex})),Wt=d.default.div(Ct||(Ct=ft(["\n  min-width: 360px;\n  max-height: 470px;\n  overflow: auto;\n"],["\n  min-width: 360px;\n  max-height: 470px;\n  overflow: auto;\n"]))),Gt=y()("plugin:event");function Ut(){var e={};return{handleTopicClick:function(e){Gt("handleTopicClick");var t=e.controller,n=e.model,o=e.topicKey;Gt(n.zoomFactor),null===n.editingDescKey&&n.editingContentKey!==o&&(n.focusKey===o&&n.focusMode===F||t.run("operation",at(at({},e),{opType:$,focusMode:z})))},handleTopicDoubleClick:function(e){var t=e.controller;null===e.model.editingDescKey&&t.run("operation",at(at({},e),{opType:$,focusMode:F}))},handleTopicContextMenu:function(e){e.controller.run("operation",at(at({},e),{opType:$,focusMode:A}))},handleActiveModalClose:function(e){var t=e.controller,n=t.run("getActiveModalProps",e);return null==n?null:"edit-desc"===n.name?function(){t.run("operation",at(at({},e),{focusMode:z,opType:$}))}:void 0},addEventListener:function(t){var n=t.key,o=t.listener,r=t.once,i=t.controller;function c(){o(),i.run("removeEventListener",{key:n,listener:o})}e[n]||(e[n]=[]),r?(c.origin=o,e[n].push(c)):e[n].push(o)},removeEventListener:function(t){var n=t.key,o=t.listener;e[n]&&(e[n]=e[n].filter((function(e){return e!==o&&e.origin!==o})))},fireEvent:function(t){var n=t.key;e[n]&&e[n].forEach((function(e){return e()}))}}}var Zt="show-menu",Yt="close",Jt="color-picker",qt="notes",Xt="plus",Qt="minus",$t="collapse",en="expand",tn="center",nn="trash",on="search";function rn(e){return"icon iconfont bm-"+e}function cn(e){return Object(o.createElement)("span",{className:rn(e)})}function an(e){return"content-"+e}function ln(e){return"content-editor-"+e}function un(e){return"desc-editor-"+e}function pn(e){return"topic-widget-"+e}function sn(e){return"topic-"+e}function dn(e){return"links-"+e}function fn(e){return"links-svg-"+e}function yn(e){return"collapse-"+e}function mn(e,t){return"dropArea-"+t+"-"+e}var hn="DIAGRAM-ROOT",gn="DragScrollWidget",bn="svg-highlight",vn="focus-highlight",xn="drop-effect",On="CENTER_ROOT_TOPIC",Tn="DIAGRAM_CUSTOMIZE_BASE_Z_INDEX",En="TOPIC_CONTEXT_MENU_ENABLED",kn="TOPIC_TITLE",wn=function(e){e.stopPropagation()};function Cn(e,t){!function(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}("data:text/plain,"+encodeURIComponent(e),t)}function Sn(e){var t=document.createElement("input");return t.type="file",t.accept=e,new Promise((function(e,n){t.addEventListener("change",(function(t){var o=t.target.files[0],r=new FileReader;r.onload=function(t){var n=t.target.result;e(n)},r.onerror=function(e){n(e.target.error)},r.readAsText(o)})),t.click()}))}function jn(e){var t=e.top,n=void 0===t?0:t,o=e.right,r=void 0===o?0:o,i=e.bottom,c=void 0===i?0:i,a=e.left;return n+"px "+r+"px "+c+"px "+(void 0===a?0:a)+"px"}function Rn(e){return(e.top+e.bottom)/2}function Kn(e,t){return(e.x+t.x)/2}function Dn(e,t){return(e.y+t.y)/2}function Ln(e){return[(e.left+e.right)/2,(e.top+e.bottom)/2]}function _n(e,t,n){void 0===n&&(n=1);var o=e.getBoundingClientRect(),r=Ln(t.getBoundingClientRect()),i=Ln(o);i[0]=(i[0]-r[0])/n,i[1]=(i[1]-r[1])/n;var c=o.width/n,a=o.height/n;return{left:i[0]-c/2,right:i[0]+c/2,top:i[1]-a/2,bottom:i[1]+a/2,width:c,height:a}}function Mn(e,t){var n=e.getBoundingClientRect(),o=Ln(t.getBoundingClientRect()),r=Ln(n);return[r[0]-o[0],r[1]-o[1]]}var In="ADD_CHILD",Pn="ADD_SIBLING",zn="DELETE_TOPIC",Fn="EDIT_CONTENT",Nn="EDIT_NOTES",An="SET_EDITOR_ROOT";function Bn(){return{customizeHotKeys:function(e){var t=function(t){return function(n){!function(e,t){var n=t.topicKey,o=t.model,r=t.controller;void 0===n&&(t=at(at({},t),{topicKey:o.focusKey})),r.run("operation",at(at({},t),{opType:e}))}(t,e)}};return{topicHotKeys:new Map([[In,{label:"add child",combo:"tab",onKeyDown:t(q)}],[Pn,{label:"add sibling",combo:"enter",onKeyDown:t(X)}],[zn,{label:"delete topic",combo:"del",onKeyDown:t(Q)}],[Fn,{label:"edit content",combo:"space",onKeyDown:t(ie)}],[Nn,{label:"edit notes",combo:"alt + d",onKeyDown:t(ce)}],[An,{label:"set editor root",combo:"alt + shift + f",onKeyDown:t(le)}]]),globalHotKeys:new Map}}}}var Vn=y()("plugin:operation");function Hn(){var e=new Map([[U,he.toggleCollapse],[Z,he.collapseAll],[Y,he.expandAll],[J,he.expandTo],[q,he.addChild],[X,he.addSibling],[Q,he.deleteTopic],[$,he.focusTopic],[ee,he.setFocusMode],[te,he.setStyle],[ne,he.setTheme],[oe,he.setBlockData],[re,he.deleteBlock],[ie,function(e){var t=e.model,n=e.topicKey;return he.focusTopic({model:t,topicKey:n,focusMode:F})}],[ce,function(e){var t=e.model,n=e.topicKey,o=t.getTopic(n).getBlock(P);return null!=o.block&&null!=o.block.data||(t=he.setBlockData({model:t,topicKey:n,blockType:P,data:""})),t=he.focusTopic({model:t,topicKey:n,focusMode:N})}],[ae,function(e){var t=e.srcKey,n=e.dstKey,o=e.dropDir,r=e.model,i=r.getTopic(t),c=r.getTopic(n),a=i.parentKey,l=r.getTopic(a).subKeys,u=l.indexOf(t);if(l=l.delete(u),"in"===o){var p=c.subKeys;p=p.push(t),r=r.withMutations((function(e){e.setIn(["topics",a,"subKeys"],l).setIn(["topics",t,"parentKey"],n).setIn(["topics",n,"subKeys"],p).setIn(["topics",n,"collapse"],!1)}))}else{var s=c.parentKey,d=r.getTopic(s).subKeys,f=d.indexOf(n);if(a===s){var y=Object(x.List)();d.forEach((function(e){e!==t&&(y=e===n?"prev"===o?y.push(t).push(e):y.push(e).push(t):y.push(e))})),r=r.withMutations((function(e){e.setIn(["topics",s,"subKeys"],y)}))}else"prev"===o?d=d.insert(f,t):"next"===o&&(d=d.insert(f+1,t)),r=r.withMutations((function(e){e.setIn(["topics",a,"subKeys"],l).setIn(["topics",t,"parentKey"],s).setIn(["topics",s,"subKeys"],d).setIn(["topics",s,"collapse"],!1)}))}return r}],[le,he.setEditorRootTopicKey]]),t=Object(x.Stack)(),n=Object(x.Stack)(),o=!0,r=new Set;return{isOperationEnabled:function(e){return o},enableOperation:function(){o=!0},disableOperation:function(e){var t=e.whiteList;o=!1,t?r=new Set(t):r.clear()},getOpMap:function(t){return e},getAllowUndo:function(e){var t=e.model,n=e.opType;if(n)switch(n){case $:case ie:case ce:return!1}switch(t.focusMode){case"EDITING_DESC":case"EDITING_CONTENT":return!1}return t.config.allowUndo},getUndoRedoStack:function(){return{undoStack:t,redoStack:n}},setUndoStack:function(e){Vn("setUndoStack",e.undoStack),t=e.undoStack},setRedoStack:function(e){Vn("setRedoStack",e.redoStack),n=e.redoStack},canUndo:function(e){var t=e.controller,n=t.run("getUndoRedoStack",e).undoStack,o=t.run("getAllowUndo",e);return n.size>0&&o},canRedo:function(e){var t=e.controller,n=t.run("getUndoRedoStack",e).redoStack,o=t.run("getAllowUndo",e);return n.size>0&&o},undo:function(e){var t=e.controller,n=e.model;if(t.run("getAllowUndo",e)){var o=t.run("getUndoRedoStack",e),r=o.undoStack,i=o.redoStack,c=r.peek();c&&(t.run("setUndoStack",at(at({},e),{undoStack:r.shift()})),t.run("setRedoStack",at(at({},e),{redoStack:i.push(n)})),Vn(c),t.change(c))}},redo:function(e){var t=e.controller,n=e.model;if(t.run("getAllowUndo",e)){var o=t.run("getUndoRedoStack",e),r=o.undoStack,i=o.redoStack,c=i.peek();c&&(t.run("setUndoStack",at(at({},e),{undoStack:r.push(n)})),t.run("setRedoStack",at(at({},e),{redoStack:i.shift()})),t.change(c))}},operation:function(e){var t=e.controller,n=e.opType,o=e.model,i=e.opArray,c=e.callback;if(null!=i&&!Array.isArray(i))throw new Error("operation: the type of opArray must be array!");if(null!=n&&null!=i)throw new Error("operation: opType and opArray conflict!");if(!t.run("isOperationEnabled",e)){if(0===r.size)return;if(null!=i){var a=i.filter((function(e){return!r.has(e.opType)}));if(a&&a.length>0)return}else if(!r.has(n))return}Vn("operation:",n),Vn("operation:",o),Vn("operation:",e);var l,u=t.run("getOpMap",e);if(t.run("beforeOperation",e),t.run("getAllowUndo",e)){var p=t.run("getUndoRedoStack",e).undoStack;t.run("setUndoStack",at(at({},e),{undoStack:p.push(o)}))}if(null!=i)l=i.reduce((function(e,n){var o=n.opType;if(!u.has(o))throw new Error("opType:"+o+" not exist!");var r=u.get(o),i=at(at({controller:t},n),{model:e}),c=t.run("beforeOpFunction",i);return c=r(at(at({},i),{model:c})),c=t.run("afterOpFunction",at(at({},i),{model:c}))}),o);else{if(!u.has(n))throw new Error("opType:"+n+" not exist!");var s=u.get(n);l=t.run("beforeOpFunction",e),l=s(at(at({},e),{model:l})),l=t.run("afterOpFunction",at(at({},e),{model:l}))}Vn("newModel:",l),t.change(l,c),t.run("afterOperation",e)},deleteRefKey:function(e){var t,n,o=e.model,r=e.topicKey,i=e.deleteRef,c=de(o,r);c.push(r);try{for(var a=pt(c),l=a.next();!l.done;l=a.next()){var u=l.value;i(dn(u)),i(fn(u)),i(an(u)),i(ln(u)),i(un(u)),i(pn(u)),i(sn(u)),i(yn(u)),i(mn(u,"next")),i(mn(u,"prev"))}}catch(p){t={error:p}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}},beforeOperation:function(e){},afterOperation:function(e){},beforeOpFunction:function(e){var t=e.controller,n=e.opType,o=e.model,r=e.topicKey;return n===Q&&r!==o.editorRootTopicKey&&t.run("deleteRefKey",e),o},afterOpFunction:function(e){return e.model}}}var Wn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ct(t,e),t.prototype.render=function(){var e=this.props.controller;return Object(o.createElement)(m.n,null,e.run("customizeTopicContextMenu",this.props))},t}(St),Gn=[{icon:"edit",label:"edit",shortcut:"Space",rootCanUse:!0,opType:ie},{icon:"add-sibling",label:"add sibling",shortcut:"Enter",opType:X},{icon:"add-child",label:"add child",shortcut:"Tab",rootCanUse:!0,opType:q},{icon:"notes",label:"edit notes",shortcut:"Alt + D",rootCanUse:!0,opType:ce},{icon:"delete-node",label:"delete node",shortcut:"Del",opType:Q},{icon:"root",label:"set as editor root",shortcut:"Alt + Shift + F",opType:le}];var Un,Zn,Yn=y()("node:topic-drop-effect"),Jn=d.default.svg(Un||(Un=ft(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"],["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),qn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={content:null},t}return ct(t,e),t.prototype.layout=function(){var e=this.props,t=this.props,n=t.getRef,r=t.model,i=t.zoomFactor,c=t.controller.run("getDragTargetProps",e),a=c.key,l=c.dropDir;if(Yn("layout",l),null!==a){var u=n("in"===l?an(a):mn(a,l)),p=n("svg-drop-effect"),s=n(gn).bigView,d=_n(u,s,i),f=_n(p,s,i),y=d.left-f.left-3,m=d.top-f.top-3,h=d.width+6,g=d.height+6;this.setState({content:Object(o.createElement)("g",null,Object(o.createElement)("rect",{x:y,y:m,width:h,height:g,fill:"none",stroke:r.config.theme.highlightColor,strokeDasharray:"5,5",strokeWidth:2}))})}else this.setState({content:null})},t.prototype.render=function(){var e=this.props.saveRef;return Object(o.createElement)(Jn,{ref:e("svg-drop-effect")},this.state.content)},t}(St),Xn=y()("plugin:drag-and-drop"),Qn=d.default.div(Zn||(Zn=ft(["\n  height: ",";\n  width: 100%;\n  margin: 5px 0px;\n"],["\n  height: ",";\n  width: 100%;\n  margin: 5px 0px;\n"])),(function(e){return e.height+"px"}));function $n(){var e=null,t=null;return{renderTopicDropArea:function(e){var t=e.topicKey,n=e.dropDir,r=e.saveRef,i=e.controller,c=e.model,a={onDragEnter:function(o){Xn("onDragEnter",t,n),i.run("handleTopicDragEnter",at(at({},e),{ev:o,dropDir:n}))},onDragLeave:function(o){Xn("onDragLeave",t,n),i.run("handleTopicDragLeave",at(at({},e),{ev:o,dropDir:n}))},onDragOver:function(e){e.preventDefault()},onDrop:function(o){Xn("onDrop",t,n),i.run("handleTopicDrop",at(at({},e),{ev:o,dropDir:n}))}};return Object(o.createElement)(Qn,at({height:c.config.theme.marginV/2,ref:r(mn(t,n))},a))},renderDragAndDropEffect:function(e){Xn("renderDragAndDropEffect");var t=e.saveRef;return Object(o.createElement)(qn,at({ref:t(xn)},e))},getDragTargetProps:function(n){return{key:e,dropDir:t}},handleTopicDragStart:function(e){var t=e.controller;e.ev.stopPropagation(),t.run("operation",at(at({},e),{opType:$,focusMode:B}))},canDrop:function(e){var t=e.srcKey,n=e.dstKey,o=e.model,r=e.dropDir;return t!==o.editorRootTopicKey&&t!==n&&fe(o,t,n)!==V&&((n!==o.editorRootTopicKey||"in"===r)&&(o.getTopic(t).parentKey!==n||"in"!==r))},handleTopicDragEnter:function(n){var o=n.dropDir,r=n.topicKey,i=n.controller,c=n.model;Xn("handleTopicDragEnter:",r,o),i.run("canDrop",at(at({},n),{srcKey:c.focusKey,dstKey:r}))&&(e=r,t=o,i.change(c))},handleTopicDragLeave:function(n){var o=n.controller,r=n.model,i=n.topicKey,c=n.dropDir,a=n.getRef,l=n.ev.nativeEvent.relatedTarget;Xn("handleTopicDragLeave:",i,c);var u=a(an(i));u==l||u.contains(l)||(e=null,t=null,o.change(r))},handleTopicDrop:function(n){Xn("handleTopicDrop");var o=n.controller,r=n.topicKey,i=n.model;n=at(at({},n),{srcKey:i.focusKey,dstKey:r}),e=null,t=null,o.run("canDrop",n)&&o.run("operation",at(at({},n),{opType:ae}))}}}var eo,to,no,oo,ro,io,co,ao,lo,uo,po,so=Object(d.default)(Ht)(eo||(eo=ft(["\n  position: absolute;\n  width: 20%;\n  padding: 0 5px;\n  background: white;\n  left: 30px;\n  top: 20px;\n  border-radius: 2px;\n"],["\n  position: absolute;\n  width: 20%;\n  padding: 0 5px;\n  background: white;\n  left: 30px;\n  top: 20px;\n  border-radius: 2px;\n"]))),fo=d.default.div(to||(to=ft(["\n  max-width: 600px;\n"],["\n  max-width: 600px;\n"]))),yo=d.default.span(no||(no=ft([""],[""]))),mo=function(e){function t(t){var n=e.call(this,t)||this;return n.setEditorRootTopicKey=function(e){return function(){var t=n.props,o=t.model,r=t.controller;o.editorRootTopicKey!==e&&r.change(he.setEditorRootTopicKey({model:o,topicKey:e}))}},n.breadcrumbRenderer=function(e){var t=e.text,n=lt(e,["text"]),r=t.length>8,i=r?t.substr(0,8)+"...":t,c={content:Object(o.createElement)(fo,null,t),position:m.u.BOTTOM_RIGHT},a=Object(o.createElement)(m.b,at({},n),Object(o.createElement)(yo,null,i));return r?Object(o.createElement)(m.x,at({},c),a):a},n.state={show:!1},n}return ct(t,e),t.prototype.render=function(){var e=this.props,t=e.model,n=e.controller,r=e.zIndex,i=t.editorRootTopicKey;if(i===t.rootTopicKey)return null;for(var c=[],a=t.getTopic(i);null!=a;){var l=n.getValue(kn,at(at({},e),{topicKey:a.key}));c.unshift({text:l,onClick:this.setEditorRootTopicKey(a.key)}),a=t.getTopic(a.parentKey)}var u={items:c,breadcrumbRenderer:this.breadcrumbRenderer};return Object(o.createElement)(so,{zIndex:r},Object(o.createElement)(m.c,at({},u)))},t}(St),ho=d.default.div(oo||(oo=ft(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 5px;\n"],["\n  position: relative;\n  display: flex;\n  align-items: center;\n  padding: 5px;\n"]))),go=d.default.div(ro||(ro=ft(["\n  width: 100%;\n  height: 100%;\n  background: ",";\n"],["\n  width: 100%;\n  height: 100%;\n  background: ",";\n"])),(function(e){return e.theme.background})),bo=function(e){function t(t){var n=e.call(this,t)||this;return n.setZoomFactor=function(e){n.dragScrollWidget.setZoomFactor(e)},n.onWheel=function(e){if(e.altKey||e.ctrlKey){var t=n.props.controller,o=t.run("getZoomFactor",n.props);(o-=e.nativeEvent.deltaY>0?.1:-.1)<.5&&(o=.5),o>4&&(o=4),t.run("setZoomFactor",at(at({},n.props),{zoomFactor:o}))}},n}return ct(t,e),t.prototype.renderHotkeys=function(){var e=this.props,t=e.controller,n=e.model,r=t.run("customizeHotKeys",e);if(null===r)return null;if(!(r.topicHotKeys instanceof Map&&r.globalHotKeys instanceof Map))throw new TypeError("topicHotKeys and globalHotKeys must be a Map");var i=[];return n.focusMode!==z&&n.focusMode!==A||r.topicHotKeys.forEach((function(e,t){i.push(Object(o.createElement)(m.j,at({key:t},e,{global:!0})))})),r.globalHotKeys.forEach((function(e,t){i.push(Object(o.createElement)(m.j,at({key:t},e,{global:!0})))})),Object(o.createElement)(m.k,null,i)},t.prototype.componentDidMount=function(){var e=this.props,t=e.getRef,n=e.model;e.controller.run("addZoomFactorChangeEventListener",at(at({},this.props),{listener:this.setZoomFactor}));var o=t(sn(n.editorRootTopicKey)),r=t("node-layer"),i=o.getBoundingClientRect(),c=r.getBoundingClientRect();this.dragScrollWidget.setViewBoxScrollDelta(0,i.top-c.top-this.dragScrollWidget.viewBox.getBoundingClientRect().height/2+i.height),this.layout()},t.prototype.componentWillUnmount=function(){this.props.controller.run("removeZoomFactorChangeEventListener",at(at({},this.props),{listener:this.setZoomFactor}))},Object.defineProperty(t.prototype,"dragScrollWidget",{get:function(){return this.props.getRef(gn)},enumerable:!0,configurable:!0}),t.prototype.componentDidUpdate=function(){this.props.controller.run("fireEvent",at(at({},this.props),{key:On})),this.layout()},t.prototype.layout=function(){this.props.controller.run("layout",this.props)},t.prototype.render=function(){var e=this,t=this.props,n=t.saveRef,r=t.model,i=t.controller,c=r.editorRootTopicKey;return Object(o.createElement)(go,{onWheel:this.onWheel},Object(o.createElement)(Dt,at({},this.state,{enableMouseWheel:!1,zoomFactor:r.zoomFactor,ref:n(gn)}),(function(t,r){var a=at(at({},e.props),{topicKey:c,setViewBoxScroll:t,setViewBoxScrollDelta:r});return Object(o.createElement)(ho,{ref:n("node-layer")},i.run("renderRootWidget",a))})))},t=ut([m.l],t)}(o.Component),vo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClose=function(){var e=t.props.controller.run("handleActiveModalClose",t.props);e&&e()},t}return ct(t,e),t.prototype.render=function(){var e=this.props.controller,t=e.run("renderModal",this.props),n=e.run("getActiveModalProps",this.props);return Object(o.createElement)(m.g,{onClose:this.handleClose,isOpen:null!==t,autoFocus:!0,enforceFocus:!0,usePortal:!0,title:n&&n.title,style:n&&n.style},Object(o.createElement)("div",{className:h.a.DIALOG_BODY,style:{minHeight:0}},t))},t}(St),xo=d.default.svg(io||(io=ft(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"],["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),Oo=y()("node:root-sub-links"),To=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={curves:[]},t}return ct(t,e),t.prototype.layout=function(){var e,t,n,r=this.props,i=r.model,c=r.getRef,a=r.topicKey,l=r.zoomFactor,u=r.controller,p=i.getTopic(a),s=c(an(a)),d=c(fn(a)),f=c(gn).bigView,y=_n(s,f,l),m=_n(d,f,l);e={x:(n=y,(n.left+n.right)/2-m.left),y:Rn(y)-m.top};var h=[];p.subKeys.forEach((function(n){var i,a=u.run("getLinkStyle",at(at({},r),{topicKey:n})),p=a.lineType,s=_n(c(an(n)),f,l);if(t={x:(t=s.left>y.right?{x:s.left,y:Rn(s)}:{x:s.right,y:Rn(s)}).x-m.left,y:t.y-m.top},"curve"===p)i="M "+e.x+" "+e.y+" C "+e.x+" "+Dn(e,t)+" "+Kn(e,t)+" "+t.y+" "+t.x+" "+t.y;else if("line"===p)i="M "+e.x+" "+e.y+" L "+t.x+" "+t.y;else if("round"===p){var d=t.y>e.y?1:-1,g=t.x>e.x?1:-1,b=a.lineRadius;if(null==b)throw new Error("link line type is round, but lineRadius is not provided!");i=t.y===e.y?"M "+e.x+" "+e.y+" H "+t.x:"M "+e.x+" "+e.y+"  V "+(t.y-d*b)+" A "+b+" "+b+" 0 0 "+(d*g===1?0:1)+" "+(e.x+b*g)+" "+t.y+" H "+t.x}h.push(Object(o.createElement)("path",{key:"link-"+n,d:i,strokeWidth:a.lineWidth,stroke:a.lineColor,fill:"none"}))})),this.setState({curves:h})},t.prototype.render=function(){Oo("render");var e=this.props,t=e.topicKey,n=e.saveRef;return Object(o.createElement)(xo,{ref:n(fn(t))},Object(o.createElement)("g",null,this.state.curves))},t}(St),Eo=y()("RootNode"),ko=d.default.div(co||(co=ft(["\n  display: flex;\n  position: relative;\n\n  align-items: ",";\n  flex-direction: column;\n\n  padding: ",";\n"],["\n  display: flex;\n  position: relative;\n\n  align-items: ",";\n  flex-direction: column;\n\n  padding: ",";\n"])),(function(e){return e.topicDirection===K?"flex-end":"flex-start"}),(function(e){return e.topicDirection===K?"15px 60px 15px 0px":"15px 0px 15px 60px"})),wo=d.default.div(ao||(ao=ft(["\n  display: flex;\n  position: relative;\n  align-items: center;\n  z-index: 3;\n"],["\n  display: flex;\n  position: relative;\n  align-items: center;\n  z-index: 3;\n"]))),Co=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ct(t,e),t.prototype.renderPartTopics=function(e,t){var n=this.props,r=n.controller,i=n.saveRef,c=r.run("createSubTopics",at(at({},this.props),{dir:t,isRoot:!0,topics:e}));if(!c)return null;var a=c.subTopics,l="bm-layer-"+(t===K?"left":"right");return Object(o.createElement)(ko,{topicDirection:t,ref:i(l)},a)},t.prototype.render=function(){Eo("render");var e=this.props,t=e.model,n=e.topicKey,r=e.saveRef,i=e.controller,c=i.run("getTopicContentStyle",e),a=t.config,l=i.run("renderTopicContent",at(at({},e),{topicStyle:c,dir:L})),u=i.run("getPartTopics",{layout:a.layoutDir,model:t,topicKey:n}),p=Object(o.createElement)(wo,{ref:r(sn(n))},l),s=i.run("renderRootWidgetOtherChildren",e);switch(a.layoutDir){case j.LEFT_AND_RIGHT:return Object(o.createElement)(o.Fragment,null,this.renderPartTopics(u.L,"L"),p,this.renderPartTopics(u.R,"R"),s);case j.LEFT_TO_RIGHT:return Object(o.createElement)(o.Fragment,null,p,this.renderPartTopics(u.R,"R"),s);case j.RIGHT_TO_LEFT:return Object(o.createElement)(o.Fragment,null,this.renderPartTopics(u.L,"L"),p,s);case j.TOP_TO_BOTTOM:return Object(o.createElement)(o.Fragment,null,p,this.renderPartTopics(u.B,"B"),s)}return null},t}(o.Component),So=d.default.div(po||(po=ft(["\n  position: absolute;\n  top: calc(50% - 10px);\n  ",";\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  //@ts-ignore\n  background: ",";\n  cursor: pointer;\n  padding: 0;\n  font-size: 14px;\n  line-height: 20px;\n  border: 0;\n  z-index: 2;\n"],["\n  position: absolute;\n  top: calc(50% - 10px);\n  ",";\n  border-radius: 50%;\n  width: 20px;\n  height: 20px;\n  text-align: center;\n  //@ts-ignore\n  background: ",";\n  cursor: pointer;\n  padding: 0;\n  font-size: 14px;\n  line-height: 20px;\n  border: 0;\n  z-index: 2;\n"])),(function(e){var t=e.dir;return t===D?Object(d.css)(lo||(lo=ft(["\n        right: -25px;\n      "],["\n        right: -25px;\n      "]))):t===K?Object(d.css)(uo||(uo=ft(["\n        left: -25px;\n      "],["\n        left: -25px;\n      "]))):void 0}),(function(e){return e.background}));function jo(e){var t,n=e.model,r=e.topicKey,i=e.topicStyle,c=e.dir,a=e.saveRef,l=e.onClickCollapse,u=n.getTopic(r);return u.subKeys.size>0?Object(o.createElement)(So,{ref:a(yn(r)),onClick:l,background:i.background,dir:c,className:tt()((t={icon:!0,iconfont:!0},t["bm-"+(u.collapse?"plus":"minus")]=!0,t))}):null}var Ro,Ko,Do=y()("node:topic-content2"),Lo=d.default.div(Ro||(Ro=ft(["\n  position: relative;\n"],["\n  position: relative;\n"]))),_o=d.default.div(Ko||(Ko=ft(["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: auto;\n  z-index: 10;\n  color: black;\n"],["\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: auto;\n  z-index: 10;\n  color: black;\n"]))),Mo=function(e){Do("cancelEvent"),e.preventDefault(),e.stopPropagation()};function Io(e){var t,n=e.controller,r=e.model,i=e.topicKey,c=e.getRef,a=r.editingContentKey!==i,l=n.run("renderTopicContentEditor",at(at({},e),{readOnly:a}));if(a)t=l;else{var u,p={width:50,height:40},d=c("content-editor-"+i);d&&(p=d.getBoundingClientRect());var f=new s.a((function(e,t){var n=e[0].contentRect;u.style.left=(p.width-n.width)/2+"px",u.style.top=(p.height-n.height)/2+"px"}));Do(p),t=Object(o.createElement)(o.Fragment,null,Object(o.createElement)("div",{style:{width:p.width,height:p.height}}),Object(o.createElement)(_o,{ref:function(e){e&&(u=e,f.observe(u))}},l))}return Object(o.createElement)(Lo,{onDragEnter:Mo,onDragOver:Mo},t)}var Po,zo,Fo,No=y()("node:topic-content-widget"),Ao=d.default.div(Po||(Po=ft(["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  //overflow: hidden;\n  position: relative;\n"],["\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n  //overflow: hidden;\n  position: relative;\n"]))),Bo=d.default.div(zo||(zo=ft(["\n  position: relative;\n"],["\n  position: relative;\n"]))),Vo=function(e){function t(t){var n=e.call(this,t)||this;return n.onDragStart=function(e){n.run("handleTopicDragStart",at(at({},n.props),{ev:e}))},n.onDragOver=function(e){e.preventDefault()},n.onDragEnter=function(e){No("onDragEnter",n.props.topicKey),n.run("handleTopicDragEnter",at(at({},n.props),{ev:e,dropDir:"in"}))},n.onDragLeave=function(e){n.run("handleTopicDragLeave",at(at({},n.props),{ev:e,dropDir:"in"}))},n.onDrop=function(e){No("onDrop"),n.run("handleTopicDrop",at(at({},n.props),{ev:e,dropDir:"in"}))},n.onClick=function(e){var t=n.props.controller;n.handleTopicClickTimeout=setTimeout((function(){t.run("handleTopicClick",at(at({},n.props),{ev:e}))}),200)},n.onDoubleClick=function(e){clearTimeout(n.handleTopicClickTimeout),n.props.controller.run("handleTopicDoubleClick",at(at({},n.props),{ev:e}))},n.needRelocation=!1,n.onClickCollapse=function(e){e.stopPropagation();var t=n.props,o=t.topicKey,r=t.getRef;n.needRelocation=!0;var i=r(yn(o)).getBoundingClientRect();No("oldRect",i),n.oldCollapseIconVector=[i.left+i.width/2,i.top+i.height/2],No("oldCollapseIconVector",n.oldCollapseIconVector),n.operation(U,n.props)},n.state={dragEnter:!1},n}return ct(t,e),t.prototype.renderContextMenu=function(){var e=this.props.controller;if(e.getValue(En,at({},this.props)))return this.operation($,at(at({},this.props),{focusMode:A})),e.run("renderTopicContextMenu",this.props)},t.prototype.onContextMenuClose=function(){},t.prototype.componentDidUpdate=function(){if(this.needRelocation){var e=this.props,t=e.getRef,n=e.topicKey,o=e.setViewBoxScrollDelta,r=t(yn(n)).getBoundingClientRect(),i=[r.left+r.width/2,r.top+r.height/2];No("newVector:",i),No("oldVector:",this.oldCollapseIconVector);var c=[i[0]-this.oldCollapseIconVector[0],i[1]-this.oldCollapseIconVector[1]];No("vector",c),o(c[0],c[1]),this.needRelocation=!1}},t.prototype.render=function(){var e=this.props,t=e.saveRef,n=e.topicKey,r=e.model,i=e.controller,c=e.topicStyle,a=e.dir;No("render",n,r.focusMode);var l=i.run("isOperationEnabled",e)&&r.editingContentKey!==n,u=i.run("renderTopicCollapseIcon",at(at({},e),{onClickCollapse:this.onClickCollapse.bind(this)})),p=i.run("renderTopicDropArea",at(at({},e),{dropDir:"prev"})),s=i.run("renderTopicDropArea",at(at({},e),{dropDir:"next"})),d={onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDragOver:this.onDragOver,onDrop:this.onDrop};return Object(o.createElement)(Bo,null,p,Object(o.createElement)(Ao,at({style:c,draggable:l,ref:t(an(n)),onDragStart:this.onDragStart,onClick:this.onClick,onDoubleClick:this.onDoubleClick},d),i.run("renderTopicBlocks",e),i.run("renderTopicContentOthers",e)),s,a!==L&&u)},t=ut([m.f],t)}(St),Ho=y()("node:topic-desc"),Wo=d.default.div(Fo||(Fo=ft(["\n  overflow: auto;\n"],["\n  overflow: auto;\n"])));function Go(e){var t=e.controller,n=e.model,r=e.topicKey,i=e.getRef,c=n.editingDescKey===r;Ho("isEditing",c);var a=n.getTopic(r).getBlock(P);if(!c&&t.run("isBlockEmpty",at(at({},e),{block:a.block})))return null;var l=t.run("renderTopicDescEditor",e),u=i(hn),p={maxWidth:"800px",maxHeight:"600px"};if(u){var s=u.getBoundingClientRect();p.maxWidth=.6*s.width+"px",p.maxHeight=.8*s.height+"px"}var d={autoFocus:!1,content:Object(o.createElement)(Wo,{onClick:wn,classname:h.a.POPOVER_DISMISS,style:p},l),target:Object(o.createElement)(Vt,{onClick:function(n){n.stopPropagation(),t.run("operation",at(at({},e),{opType:ce}))},className:rn(qt),tabIndex:-1}),interactionKind:m.t.HOVER,hoverOpenDelay:500};return a.block&&Object(o.createElement)(m.s,at({},d))}var Uo,Zo,Yo,Jo,qo,Xo,Qo,$o,er,tr=d.default.svg(Uo||(Uo=ft(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"],["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 2;\n  pointer-events: none;\n"]))),nr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={content:null},t}return ct(t,e),t.prototype.layout=function(){var e=this.props,t=e.getRef,n=e.model,r=e.zoomFactor,i=n.focusKey,c=n.focusMode;if(i&&c!==F){var a=t(an(i)),l=t(gn).bigView,u=t(bn),p=_n(a,l,r),s=_n(u,l,r),d=p.left-s.left-3,f=p.top-s.top-3,y=p.width+6,m=p.height+6;this.setState({content:Object(o.createElement)("rect",{x:d,y:f,width:y,height:m,fill:"none",stroke:n.config.theme.highlightColor,strokeWidth:2})})}else this.setState({content:null})},t.prototype.render=function(){var e=this.props.saveRef;return Object(o.createElement)(tr,{ref:e(bn)},this.state.content)},t}(St),or=d.default.svg(Zo||(Zo=ft(["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"],["\n  width: 100%;\n  height: 100%;\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1;\n  pointer-events: none;\n"]))),rr=y()("node:topic-sub-links"),ir=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={curves:[]},t}return ct(t,e),t.prototype.layout=function(){var e,t,n,r=this.props,i=r.model,c=r.getRef,a=r.topicKey,l=r.dir,u=r.controller,p=u.run("getZoomFactor",r),s=i.getTopic(a),d=c(an(a)),f=c(fn(a)),y=c(yn(a)),m=c(gn).bigView,h=_n(f,m,p),g=_n(y,m,p),b=_n(d,m,p);rr(a),rr("svgRect",h),rr("collapseRect",g),rr("contentRect",b),l===D?(e={x:0,y:Rn(b)-h.top},t={x:g.right-h.left+10,y:e.y}):l===K&&(e={x:h.right-h.left,y:Rn(b)-h.top},t={x:g.left-h.left-10,y:e.y});var v=[];s.subKeys.forEach((function(i){var a,d=u.run("getLinkStyle",at(at({},r),{topicKey:i})),f=c(an(i));if(f){var y=_n(f,m,p);l===D&&(n={x:y.left-h.left,y:Rn(y)-h.top}),l===K&&(n={x:y.right-h.left,y:Rn(y)-h.top});var g=d.lineType;if("curve"===g)a="M "+e.x+" "+e.y+" L "+t.x+" "+t.y+" C "+t.x+" "+Dn(t,n)+" "+Kn(t,n)+" "+n.y+" "+n.x+" "+n.y;else if("round"===g){var b=n.y>e.y?1:-1,x=n.x>e.x?1:-1,O=d.lineRadius;a=1===s.subKeys.size||Math.abs(n.y-e.y)<=1?"M "+e.x+" "+e.y+" L "+n.x+" "+n.y:"M "+e.x+" "+e.y+" H "+t.x+" V "+(n.y-b*O)+" A "+O+" "+O+" 0 0 "+(b*x===1?0:1)+" "+(t.x+O*x)+" "+n.y+" H "+n.x}else"line"===g&&(a="M "+e.x+" "+e.y+" H "+t.x+" L "+n.x+" "+n.y);v.push(Object(o.createElement)("path",{key:"link-"+i,d:a,strokeWidth:d.lineWidth,stroke:d.lineColor,fill:"none"}))}})),this.setState({curves:v})},t.prototype.render=function(){var e=this.props,t=e.topicKey,n=e.saveRef;return Object(o.createElement)(or,{ref:n(fn(t))},Object(o.createElement)("g",null,this.state.curves))},t}(St),cr=y()("node:topic-widget"),ar=d.default.div(Yo||(Yo=ft(["\n  display: flex;\n  align-items: center;\n  flex-direction: ",";\n"],["\n  display: flex;\n  align-items: center;\n  flex-direction: ",";\n"])),(function(e){return e.topicDirection===D?"row":"row-reverse"})),lr=d.default.div(Jo||(Jo=ft(["\n  position: relative;\n  padding: ",";\n"],["\n  position: relative;\n  padding: ",";\n"])),(function(e){return e.dir===D?"0 0 0 "+e.marginH+"px":"0 "+e.marginH+"px 0 0"})),ur=d.default.div(qo||(qo=ft(["\n  display: flex;\n  position: relative;\n  align-items: center;\n\n  flex-direction: ",";\n"],["\n  display: flex;\n  position: relative;\n  align-items: center;\n\n  flex-direction: ",";\n"])),(function(e){return e.topicDirection===D?"row":"row-reverse"})),pr=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ct(t,e),t.prototype.renderSubTopics=function(){var e=this.props,t=e.controller,n=e.model,r=e.topicKey,i=e.dir,c=n.getTopic(r).subKeys.toArray(),a=t.run("createSubTopics",at(at({},e),{topics:c}));if(!a)return null;var l=a.subTopics,u=t.run("renderSubLinks",e);return Object(o.createElement)(lr,{dir:i,marginH:n.config.theme.marginH},l," ",u)},t.prototype.layoutLinks=function(){var e=this.props,t=e.getRef,n=e.topicKey,o=e.model.getTopic(n);if(0!==o.subKeys.size&&!o.collapse){cr("layoutLinks",n);var r=t(dn(n));r&&r.layout()}},t.prototype.render=function(){var e=this.props,t=e.controller,n=e.topicKey,r=e.dir,i=e.saveRef;cr("render",n);var c=t.run("getTopicContentStyle",e),a=at(at({},e),{topicStyle:c}),l=t.run("renderTopicContent",a);return Object(o.createElement)(ar,{topicDirection:r},Object(o.createElement)(ur,{topicDirection:r,ref:i(sn(n))},l),this.renderSubTopics())},t}(o.Component),sr=y()("node:view-port-viewer"),dr=Object(d.default)(Ht)(Xo||(Xo=ft(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"],["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"]))),fr=Object(d.default)(Ft)(Qo||(Qo=ft(["\n  margin: 10px;\n"],["\n  margin: 10px;\n"]))),yr=d.default.span($o||($o=ft(["\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n"],["\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n"]))),mr=function(e){return Object(o.createElement)(m.x,{content:e.tooltip,position:g.a.TOP,className:h.a.ICON},Object(o.createElement)(fr,{onClick:e.onClick,tabIndex:-1},e.children))},hr=function(e){function t(t){var n=e.call(this,t)||this;return n.zoomFactorChange=function(e){sr("zoomFactorChange",e),n.setState({zoomFactor:e})},n.onClickResetZoom=function(e){var t=n.props;t.controller.run("setZoomFactor",at(at({},t),{zoomFactor:1}))},n.onClickAddZoom=function(e){var t=n.props,o=t.controller,r=o.run("getZoomFactor",t);o.run("setZoomFactor",at(at({},t),{zoomFactor:r+.1}))},n.onClickMinusZoom=function(e){var t=n.props,o=t.controller,r=o.run("getZoomFactor",t);o.run("setZoomFactor",at(at({},t),{zoomFactor:r-.1}))},n.onClickCollapseAll=function(e){var t=n.props,o=t.controller;o.run("addEventListener",at(at({},t),{key:On,listener:n.centerRootTopic,once:!0})),o.run("operation",at(at({},t),{opType:Z}))},n.onClickExpandAll=function(e){var t=n.props,o=t.controller;o.run("addEventListener",at(at({},t),{key:On,listener:n.centerRootTopic,once:!0})),o.run("operation",at(at({},t),{opType:Y}))},n.centerRootTopic=function(){var e=n.props,t=e.model;e.controller.run("moveTopicToCenter",at(at({},n.props),{topicKey:t.editorRootTopicKey}))},n}return ct(t,e),t.prototype.componentDidMount=function(){var e=this.props;e.controller.run("addZoomFactorChangeEventListener",at(at({},e),{listener:this.zoomFactorChange}))},t.prototype.componentWillUnmount=function(){var e=this.props;e.controller.run("removeZoomFactorChangeEventListener",at(at({},e),{listener:this.zoomFactorChange}))},t.prototype.render=function(){sr("render");var e=this.props,t=e.controller,n=e.zIndex,r=t.run("getZoomFactor",e);return Object(o.createElement)(dr,{zIndex:n},Object(o.createElement)(mr,{onClick:this.onClickCollapseAll,tooltip:"collapse all"},cn($t)),Object(o.createElement)(mr,{onClick:this.onClickExpandAll,tooltip:"expand all"},cn(en)),Object(o.createElement)(mr,{onClick:this.centerRootTopic,tooltip:"center root topic"},cn(tn)),Object(o.createElement)(mr,{onClick:this.onClickMinusZoom,tooltip:"zoom in"},cn(Qt)),Object(o.createElement)(mr,{onClick:this.onClickResetZoom,tooltip:"reset zoom"},Object(o.createElement)(yr,null,"zoom:"+Math.floor(100*r)+"%")),Object(o.createElement)(mr,{onClick:this.onClickAddZoom,tooltip:"zoom out"},cn(Xt)))},t}(St),gr=d.default.div(er||(er=ft(["\n  overflow: auto;\n  padding: 0px 0px 0px 20px;\n  background: #88888850;\n"],["\n  overflow: auto;\n  padding: 0px 0px 0px 20px;\n  background: #88888850;\n"])));function br(e){var t=e.controller,n=e.model,r=e.topicKey;if(n.focusMode===N){var i=t.run("renderTopicDescEditor",e);return Object(o.createElement)(m.i,{key:"drawer",title:"Edit Notes",icon:cn("note"),isOpen:!0,hasBackdrop:!0,backdropProps:{onMouseDown:wn},isCloseButtonShown:!1,onClose:function(n){n.stopPropagation();var o="topic-desc-data-"+r,i=t.run("deleteTempValue",{key:o});t.run("operation",at(at({},e),{opType:oe,topicKey:r,blockType:P,data:i,focusMode:z}))},size:"70%"},Object(o.createElement)(gr,null,i))}}function vr(e){var t=e.theme,n=e.children;return Object(o.createElement)(d.ThemeProvider,{theme:t},Object(o.createElement)(o.Fragment,null,n))}var xr,Or=y()("plugin:rendering");function Tr(){var e,t=d.default.div(xr||(xr=ft(["\n    width: 100%;\n    height: 100%;\n    background: ",";\n    position: relative;\n  "],["\n    width: 100%;\n    height: 100%;\n    background: ",";\n    position: relative;\n  "])),(function(e){return e.theme.background}));return{getDiagramProps:function(){return e},renderDiagram:function(n){var r=n.model,i=n.controller;return Object(o.createElement)(_t,null,(function(c,a,l){return e=at(at({},n),{saveRef:c,getRef:a,deleteRef:l}),Or("renderDiagram",r),Object(o.createElement)(vr,{theme:r.config.theme},Object(o.createElement)(t,{ref:c(hn)},Object(o.createElement)(bo,at({},e)),i.run("renderDiagramCustomize",e)))}))},renderDrawer:br,renderDiagramCustomize:function(e){var t=e.controller,n=e.model,o=t.getValue(Tn),r=at(at({},e),{zIndex:o,topicKey:n.focusKey});return[t.run("renderEditorRootBreadcrumbs",r),t.run("renderRightTopPanel",r),t.run("renderModals",at(at({},r),{zIndex:o+1})),t.run("renderDrawer",at(at({},r),{zIndex:o+1})),t.run("renderViewPortViewer",r)]},renderEditorRootBreadcrumbs:function(e){return Object(o.createElement)(mo,at({key:"EditorRootBreadcrumbs"},e))},renderModals:function(e){return Object(o.createElement)(vo,at({key:"modals"},e))},renderModal:function(e){return null},getActiveModalProps:function(e){return null},renderDoc:function(e){return e.children},renderRootWidget:function(e){return Object(o.createElement)(Co,at({},e))},renderTopicWidget:function(e){return Object(o.createElement)(pr,at({},e))},renderTopicContent:function(e){return Object(o.createElement)(Vo,at({},e))},renderTopicCollapseIcon:function(e){return Object(o.createElement)(jo,at({},e))},renderTopicContentOthers:function(e){return[]},renderTopicBlocks:function(e){var t=e.model,n=e.topicKey,r=e.controller,i=t.getTopic(n).blocks,c=[],a=0;return i.forEach((function(t){var n=r.run("renderTopicBlock",at(at({},e),{block:t,blockKey:"block-"+a}));n&&(c.push(Object(o.createElement)(o.Fragment,{key:"block-"+a},n)),a++)})),c},renderTopicBlock:function(e){var t=e.controller;switch(e.block.type){case I:return t.run("renderTopicBlockContent",e);case P:return t.run("renderTopicBlockDesc",e)}return null},renderTopicBlockContent:function(e){return Object(o.createElement)(Io,at({},e))},renderTopicBlockDesc:function(e){return Object(o.createElement)(Go,at({},e))},renderSubLinks:function(e){var t=e.saveRef,n=e.topicKey,r=e.model.getTopic(n);return 0===r.subKeys.size||r.collapse?null:Object(o.createElement)(ir,at({ref:t(dn(n))},e))},renderRootSubLinks:function(e){var t=e.saveRef,n=e.topicKey;return Object(o.createElement)(To,at({ref:t(dn(n))},e))},renderFocusItemHighlight:function(e){var t=e.saveRef;return Object(o.createElement)(nr,at({ref:t(vn)},e))},renderRootWidgetOtherChildren:function(e){var t=e.controller,n=t.run("getZoomFactor",e);return e=at(at({},e),{zoomFactor:n}),Object(o.createElement)(o.Fragment,null,t.run("renderRootSubLinks",e),t.run("renderFocusItemHighlight",e),t.run("renderDragAndDropEffect",e))},renderViewPortViewer:function(e){return Object(o.createElement)(hr,at({key:"view-port-viewer"},e))}}}var Er,kr,wr=Object(d.default)(Ht)(Er||(Er=ft(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  top: 20px;\n  border-radius: 2px;\n  user-select: none;\n"],["\n  position: absolute;\n  background: white;\n  right: 30px;\n  top: 20px;\n  border-radius: 2px;\n  user-select: none;\n"]))),Cr=Object(d.default)(m.w)(kr||(kr=ft(["\n  padding: 0px 10px;\n"],["\n  padding: 0px 10px;\n"])));function Sr(e){var t=e.controller,n=e.zIndex,r=e.selectedTabId,i=e.handleTabIdChange,c=st(Object(o.useState)(!1),2),a=c[0],l=c[1];return a?Object(o.createElement)(wr,{zIndex:n},Object(o.createElement)(Bt,null,Object(o.createElement)(At,{className:rn(Yt),onClick:function(){return l(!1)}})),Object(o.createElement)(Cr,{id:r,onChange:i},t.run("renderRightTopPanelTabs",e))):Object(o.createElement)(wr,{zIndex:n},Object(o.createElement)(zt,{onClick:function(){return l(!0)}},Object(o.createElement)(Pt,{className:rn(Zt)})))}var jr,Rr,Kr,Dr,Lr,_r,Mr,Ir=d.default.div(jr||(jr=ft(["\n  margin-top: 10px;\n  margin-bottom: 5px;\n  font-weight: bold;\n"],["\n  margin-top: 10px;\n  margin-bottom: 5px;\n  font-weight: bold;\n"]))),Pr=d.default.span(Rr||(Rr=ft(["\n  margin: 0px 10px 0px 0px;\n"],["\n  margin: 0px 10px 0px 0px;\n"]))),zr=d.default.div(Kr||(Kr=ft(["\n  padding: 10px;\n  margin: 0 0 10px 0;\n  border: rgba(16, 22, 26, 0.15) solid 1px;\n  border-radius: 5px;\n"],["\n  padding: 10px;\n  margin: 0 0 10px 0;\n  border: rgba(16, 22, 26, 0.15) solid 1px;\n  border-radius: 5px;\n"]))),Fr=Object(d.default)(Pr)(Dr||(Dr=ft([""],[""]))),Nr=d.default.div(Lr||(Lr=ft(["\n  display: flex;\n  align-items: center;\n  //justify-content: center;\n  margin: 5px 0;\n"],["\n  display: flex;\n  align-items: center;\n  //justify-content: center;\n  margin: 5px 0;\n"]))),Ar=d.default.div(_r||(_r=ft(["\n  height: 3px;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-bottom: 2px;\n  background: ",";\n"],["\n  height: 3px;\n  width: 80%;\n  margin-left: 10%;\n  margin-right: 10%;\n  margin-bottom: 2px;\n  background: ",";\n"])),(function(e){return e.color})),Br=d.default.div(Mr||(Mr=ft(["\n  border: 1px solid grey;\n  cursor: pointer;\n  font-weight: bold;\n"],["\n  border: 1px solid grey;\n  cursor: pointer;\n  font-weight: bold;\n"])));function Vr(e){return Object(o.createElement)("div",null,e.children,Object(o.createElement)(m.h,{style:{margin:"10px 0"}}))}function Hr(e){var t=e.color,n=e.handleColorChange;return Object(o.createElement)(Pr,null,Object(o.createElement)(m.s,null,Object(o.createElement)(Br,null,Object(o.createElement)("div",{className:rn(Jt)}),Object(o.createElement)(Ar,{color:t})),Object(o.createElement)("div",null,Object(o.createElement)(ot.a,{color:t,onChangeComplete:function(e){return n(e.hex)}}))))}function Wr(e){var t=e.title,n=e.handleClick;return Object(o.createElement)(Pr,null,Object(o.createElement)(m.d,{onClick:n},t))}function Gr(e){var t=e.layout,n=void 0===t?"h":t,r=e.title,i=lt(e,["layout","title"]),c={flexDirection:"h"===n?"row":"column",alignItems:"center"};return Object(o.createElement)(Pr,null,Object(o.createElement)(Mt,at({},c),Object(o.createElement)(It,{margin:"0 5px 0 0"},r),Object(o.createElement)(m.q,at({},i))))}function Ur(e){var t=e.text,n=e.items,r=e.itemRenderer,i=e.onItemSelect,c=nt.a.ofType(),a={items:n,itemRenderer:r,onItemSelect:i,filterable:!1};return Object(o.createElement)(Pr,null,Object(o.createElement)(c,at({},a),Object(o.createElement)(m.d,{text:t})))}var Zr=function(e){return function(t,n){var r=n.handleClick;return Object(o.createElement)(m.p,{text:""+t+e,key:t,onClick:r})}},Yr=(nt.a.ofType(),dt(Array(7).keys())),Jr=dt(Array(7).keys()),qr=[0,5,10,15,20,25,30,35],Xr=["none","solid","dotted","dashed","double"];function Qr(e){var t=e.contentStyle,n=e.setContentStyle;return Object(o.createElement)(Vr,null,Object(o.createElement)(Ir,null,"Border"),Object(o.createElement)("div",null,Object(o.createElement)(Ur,{text:"width: "+(t.borderWidth?t.borderWidth:"0px"),items:Jr,itemRenderer:Zr("px"),onItemSelect:function(e){n({borderWidth:e+"px"})}}),Object(o.createElement)(Ur,{text:"style: "+(t.borderStyle?t.borderStyle:"none"),items:Xr,itemRenderer:Zr(""),onItemSelect:function(e){n({borderStyle:e})}}),Object(o.createElement)(Ur,{text:"radius: "+t.borderRadius,items:qr,itemRenderer:Zr("px"),onItemSelect:function(e){n({borderRadius:e+"px"})}}),Object(o.createElement)(Hr,{color:t.borderColor,handleColorChange:function(e){n({borderColor:e})}})))}var $r=["curve","round","line"],ei=function(e,t){var n=t.handleClick;t.modifiers,t.query;return Object(o.createElement)(m.p,{text:""+e,key:e,onClick:n})};function ti(e){var t=e.showLinkStyle,n=void 0===t||t,r=e.showSubLinkStyle,i=void 0===r||r,c=e.linkStyle,a=void 0===c?{}:c,l=e.subLinkStyle,u=void 0===l?{}:l,p=e.setLinkStyle,s=e.setSubLinkStyle;return Object(o.createElement)(Vr,null,Object(o.createElement)(Ir,null,"Link"),n&&Object(o.createElement)(Nr,{alignItems:"center"},Object(o.createElement)(It,{margin:"0 5px 0 0"},"LinkToParent: "),Object(o.createElement)(Ur,{text:"width: "+(a?a.lineWidth:"0px"),items:Yr,itemRenderer:Zr("px"),onItemSelect:function(e){p({lineWidth:e+"px"})}}),Object(o.createElement)(Ur,{text:"lineType: "+a.lineType,items:$r,itemRenderer:ei,onItemSelect:function(e){p({lineType:e})}}),Object(o.createElement)(Hr,{color:a.lineColor,handleColorChange:function(e){p({lineColor:e})}})),i&&Object(o.createElement)(Nr,{alignItems:"center"},Object(o.createElement)(It,{margin:"0 5px 0 0"},"SubLinks: "),Object(o.createElement)(Ur,{text:"width: "+(u?u.lineWidth:"0px"),items:Yr,itemRenderer:Zr("px"),onItemSelect:function(e){s({lineWidth:e+"px"})}}),Object(o.createElement)(Ur,{text:"lineType: "+u.lineType,items:$r,itemRenderer:ei,onItemSelect:function(e){s({lineType:e})}}),Object(o.createElement)(Hr,{color:u.lineColor,handleColorChange:function(e){s({lineColor:e})}})))}function ni(e){var t=e.contentStyle,n=e.setContentStyle,r={title:"FontSize:",min:12,max:100,value:parseInt(t.fontSize),style:{width:50},onValueChange:function(e){n({fontSize:e})}},i={style:{width:50},value:t.lineHeight||"",onChange:function(e){n({lineHeight:e.target.value})}};return Object(o.createElement)(Vr,null,Object(o.createElement)(Ir,null,"Text Editor"),Object(o.createElement)(Mt,null,Object(o.createElement)(Gr,at({},r)),Object(o.createElement)(Pr,null,Object(o.createElement)(Mt,{alignItems:"center"},Object(o.createElement)(It,{margin:"0 5px 0 0"},"LineHeight: "),Object(o.createElement)(m.m,at({},i)))),Object(o.createElement)(Hr,{color:t.color,handleColorChange:function(e){n({color:e})}})))}var oi,ri=y()("node:style-editor");function ii(e){var t=e.controller,n=e.model,r=e.topicKey,i=n.getTopic(r),c=function(n){t.run("setTopicContentStyle",at(at({},e),{style:n}))};if(!n.focusKey)return null;var a=t.run("getTopicContentStyle",e),l={linkStyle:t.run("getLinkStyle",e),subLinkStyle:t.run("getSubLinkStyle",e),setLinkStyle:function(n){t.run("setLinkStyle",at(at({},e),{linkStyle:n}))},setSubLinkStyle:function(n){t.run("setSubLinkStyle",at(at({},e),{subLinkStyle:n}))}},u={contentStyle:a,setContentStyle:c};return Object(o.createElement)(Wt,null,Object(o.createElement)(Qr,at({},u)),Object(o.createElement)(ni,at({},u)),Object(o.createElement)(Vr,null,Object(o.createElement)(Ir,null,"Background"),Object(o.createElement)(Hr,{color:a.background,handleColorChange:function(e){c({background:e})}})),Object(o.createElement)(ti,at({},l)),Object(o.createElement)(Vr,null,Object(o.createElement)(Wr,{title:"Clear Topic Style",handleClick:function(){i.style&&t.run("operation",at(at({},e),{opType:te,style:null}))}}),Object(o.createElement)(Wr,{title:"Copy Style",handleClick:function(){oi=t.run("getTopicStyle",e),ri(oi)}}),Object(o.createElement)(Wr,{title:"Paste Style",handleClick:function(){oi&&t.run("operation",at(at({},e),{opType:te,style:JSON.stringify(oi)}))}})),function(e){var t=e.controller;return Object(o.createElement)(Vr,null,Object(o.createElement)(Pr,null,Object(o.createElement)(m.d,{onClick:function(n){t.run("clearAllCustomStyle",e)}},"Clear All Custom Styles")))}(e))}var ci=n(507);function ai(e){var t=e.contentStyle,n=e.setContentStyle,r=ci("padding",t.padding||"0"),i={layout:"v",min:0,max:99,style:{width:38}},c=parseInt(r["padding-top"]),a=parseInt(r["padding-right"]),l=parseInt(r["padding-bottom"]),u=parseInt(r["padding-left"]),p={top:c,right:a,bottom:l,left:u},s=function(e){return function(t){var o;n({padding:jn(at(at({},p),(o={},o[e]=t,o)))})}},d=at(at({},i),{title:"top",value:c,onValueChange:s("top")}),f=at(at({},i),{title:"right",value:a,onValueChange:s("right")}),y=at(at({},i),{title:"bottom",value:l,onValueChange:s("bottom")}),m=at(at({},i),{title:"left",value:u,onValueChange:s("left")});return Object(o.createElement)(Vr,null,Object(o.createElement)(Ir,null,"Padding"),Object(o.createElement)(Nr,null,Object(o.createElement)(Gr,at({},d)),Object(o.createElement)(Gr,at({},f)),Object(o.createElement)(Gr,at({},y)),Object(o.createElement)(Gr,at({},m))))}var li,ui=d.default.div(li||(li=ft(["\n  height: 250px;\n  overflow: auto;\n"],["\n  height: 250px;\n  overflow: auto;\n"])));function pi(e){var t=e.topicStyle,n=e.setTopicStyle,r=t.contentStyle,i=void 0===r?{}:r,c=t.linkStyle,a=void 0===c?{}:c,l=t.subLinkStyle,u=function(e){n({contentStyle:e})},p={contentStyle:i,setContentStyle:u},s={showLinkStyle:!1,linkStyle:a,subLinkStyle:void 0===l?{}:l,setLinkStyle:function(e){n({linkStyle:e})},setSubLinkStyle:function(e){n({subLinkStyle:e})}};return Object(o.createElement)(ui,null,Object(o.createElement)(Qr,at({},p)),Object(o.createElement)(ai,at({},p)),Object(o.createElement)(ni,at({},p)),Object(o.createElement)(Vr,null,Object(o.createElement)(Ir,null,"Background"),Object(o.createElement)(Hr,{color:i.background,handleColorChange:function(e){u({background:e})}})),Object(o.createElement)(ti,at({},s)))}var si="normal";function di(e){var t,n=st(Object(o.useState)(!1),2),r=(n[0],n[1],st(Object(o.useState)(!1),2)),i=r[0],c=r[1],a=e.model,l=e.controller,u=a.config.theme,p=u.rootTopic,s=u.primaryTopic,d=u.normalTopic,f=function(t){l.run("operation",at(at({},e),{opType:ne,theme:Object(rt.clone)(t)}))},y=(t=function(e){f(Object(rt.merge)(u,{randomColor:e}))},function(e){return t(e.target.checked)}),h={topicStyle:p,setTopicStyle:function(e){f(Object(rt.merge)(u,{rootTopic:e}))}},g=Object(o.createElement)(pi,at({},h)),b={topicStyle:s,setTopicStyle:function(e){f(Object(rt.merge)(u,{primaryTopic:e}))}},v=Object(o.createElement)(pi,at({},b)),x={topicStyle:d,setTopicStyle:function(e){f(Object(rt.merge)(u,{normalTopic:e}))}},O=Object(o.createElement)(pi,at({},x)),T={id:si,handleTabIdChange:function(e){si=e}},E=Object(o.createElement)(zr,null,Object(o.createElement)(m.w,at({},T),Object(o.createElement)(m.v,{id:"normal",title:"NormalTopic",panel:O}),Object(o.createElement)(m.v,{id:"primary",title:"PrimaryTopic",panel:v}),Object(o.createElement)(m.v,{id:"root",title:"RootTopic",panel:g}))),k={isOpen:i,onClose:function(e){c(!1)}},w=Object(o.createElement)(m.a,at({},k),Object(o.createElement)("p",null,"File format error"));return Object(o.createElement)(Wt,null,Object(o.createElement)(Vr,null,Object(o.createElement)(Ir,null,"Global"),Object(o.createElement)(Nr,null,Object(o.createElement)(Fr,null,"Background:"),Object(o.createElement)(Hr,{color:u.background,handleColorChange:function(e){f(Object(rt.merge)(u,{background:e}))}}),Object(o.createElement)(Fr,null,"Highlight:"),Object(o.createElement)(Hr,{color:u.highlightColor,handleColorChange:function(e){f(Object(rt.merge)(u,{highlightColor:e}))}}),Object(o.createElement)(Fr,null,"Random Color:"),Object(o.createElement)(Nt,{checked:u.randomColor,onChange:y}))),E,Object(o.createElement)(Vr,null,Object(o.createElement)(Wr,{title:"Export Theme",handleClick:function(e){Cn(JSON.stringify(u),"blink-mind-theme.json")}}),Object(o.createElement)(Wr,{title:"Import Theme",handleClick:function(e){Sn(".json,.txt").then((function(e){var t,n=JSON.parse(e);null!=(t=n).name&&null!=t.background&&null!=t.highlightColor?f(n):c(!0)}))}})),w)}function fi(){var e="topic-style",t=function(t){e=t};return{renderRightTopPanel:function(n){var r=at(at({},n),{key:"right-top-panel",selectedTabId:e,handleTabIdChange:t});return Object(o.createElement)(Sr,at({},r))},renderRightTopPanelTabs:function(e){var t=e.controller;return[t.run("renderTopicStyleEditor",e),t.run("renderThemeEditor",e)]},renderTopicStyleEditor:function(e){var t={id:"topic-style",key:"topic-style",title:"TopicStyle",panel:Object(o.createElement)(ii,at({},e))};return Object(o.createElement)(m.v,at({},t))},renderThemeEditor:function(e){var t={id:"theme-editor",key:"theme-editor",title:"Theme",panel:Object(o.createElement)(di,at({},e))};return Object(o.createElement)(m.v,at({},t))}}}var yi=y()("plugin:utils");function mi(){var e=new Map,t=new Map;return{addTempValueChangeListener:function(e){var n=e.key,o=e.listener;t.has(n)||t.set(n,[]),t.get(n).push(o)},removeTempValueChangeListener:function(e){var n=e.key,o=e.listener;t.has(n)&&(t[n]=t.get(n).filter((function(e){return e!==o})))},getTempValue:function(t){var n=t.key;return yi("getTempValue",n),e.get(n)},setTempValue:function(n){var o,r,i=n.key,c=n.value;if(yi("setTempValue",i),e.set(i,c),t.has(i)){var a=t.get(i);try{for(var l=pt(a),u=l.next();!u.done;u=l.next()){(0,u.value)(c)}}catch(p){o={error:p}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(o)throw o.error}}}},deleteTempValue:function(t){var n=t.key;yi("deleteTempValue",n);var o=e.get(n);return e.delete(n),o}}}var hi=y()("plugin:StylePlugin");function gi(){var e=new Map,t=0;return{getTopicStyle:function(e){var t=e.controller;return{contentStyle:t.run("getTopicContentStyle",e),linkStyle:t.run("getLinkStyle",e),subLinkStyle:t.run("getSubLinkStyle",e)}},getTopicContentStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;hi("getTopicContentStyle:",t,n);var r,i=n.getTopicVisualLevel(t),c=n.config.theme;if(r=i===_?c.rootTopic:i===M?c.primaryTopic:c.normalTopic,r=at(at({},c.contentStyle),r.contentStyle),c.randomColor){var a=o.run("getRandomColor",e);r=at(at({},r),{background:a,borderColor:a,subLinkStyle:at(at({},r.subLinkStyle),{lineColor:a})})}var l=n.getTopic(t);if(!l.style)return r;var u=JSON.parse(l.style);return at(at({},r),u.contentStyle)},getLinkStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;hi("getLinkStyle",t);var r,i=n.getTopicVisualLevel(t),c=n.config.theme,a=c.linkStyle;r=i===_?c.rootTopic.linkStyle:i===M?c.primaryTopic.linkStyle:c.normalTopic.linkStyle,a=at(at({},a),r);var l=n.getTopic(t);if(null!=l.parentKey){var u=o.run("getSubLinkStyle",at(at({},e),{topicKey:l.parentKey}));a=at(at({},a),u)}if(!l.style)return a;var p=JSON.parse(l.style);return at(at({},a),p.linkStyle)},getSubLinkStyle:function(e){var t=e.topicKey,n=e.model,o=e.controller;hi("getLinkStyle",t);var r,i=n.getTopicVisualLevel(t),c=n.config.theme,a=c.linkStyle;r=i===_?c.rootTopic.subLinkStyle:i===M?c.primaryTopic.subLinkStyle:c.normalTopic.subLinkStyle,a=at(at({},a),r);var l=n.getTopic(t);if(c.randomColor){var u=o.run("getRandomColor",e);hi(u),a=at(at({},a),{lineColor:u})}if(!l.style)return a;var p=JSON.parse(l.style);return at(at({},a),p.subLinkStyle)},setTopicContentStyle:function(e){var t=e.topicKey,n=e.controller,o=e.style,r=e.model.getTopic(t).style,i=r?JSON.parse(r):{},c=at(at({},i),{contentStyle:at(at({},i.contentStyle),o)});if(!Object(rt.isEqual)(i,c)){var a=JSON.stringify(c);n.run("operation",at(at({},e),{opType:te,style:a}))}},setLinkStyle:function(e){var t=e.topicKey,n=e.controller,o=e.linkStyle,r=e.model.getTopic(t).style,i=r?JSON.parse(r):{},c=at(at({},i),{linkStyle:at(at({},i.linkStyle),o)});if(!Object(rt.isEqual)(i,c)){var a=JSON.stringify(c);n.run("operation",at(at({},e),{opType:te,style:a}))}},setSubLinkStyle:function(e){var t=e.topicKey,n=e.controller,o=e.subLinkStyle,r=e.model.getTopic(t).style,i=r?JSON.parse(r):{},c=at(at({},i),{subLinkStyle:at(at({},i.subLinkStyle),o)});if(!Object(rt.isEqual)(i,c)){var a=JSON.stringify(c);n.run("operation",at(at({},e),{opType:te,style:a}))}},getTopicThemeStyle:function(e){var t=e.topicKey,n=e.model,o=n.getTopicVisualLevel(t),r=n.config.theme;return o===_?r.rootTopic:o===M?r.primaryTopic:r.normalTopic},getRandomColor:function(n){var o=n.topicKey;if(e.has(o))return e.get(o);var r=["#00CC99","#FFEE88","#A167A5","#E5F993","#F5C396","#DB995A","#83BCFF","#ED7B84","#739E82","#D3BCC0","#FFA0FD","#EFD3D7","#C6878F"],i=r[++t%r.length];return e.set(o,i),hi("getRandomColor",o,i),i},clearAllCustomStyle:function(e){var t=e.model,n=e.controller,o=t.withMutations((function(e){e.topics.keySeq().forEach((function(t){e.setIn(["topics",t,"style"],null)}))}));n.change(o)}}}function bi(){return[[Tr(),mi(),{renderTopicContextMenu:function(e){return Object(o.createElement)(Wn,at({},e))},customizeTopicContextMenu:function(e){var t=e.topicKey,n=e.model,r=e.controller,i=t===n.editorRootTopicKey;function c(t){return function(n){t.opType&&r.run("operation",at(at({},e),{opType:t.opType}))}}return Gn.map((function(e){return i&&!e.rootCanUse?null:Object(o.createElement)(m.p,{key:e.label,icon:cn(e.icon),text:e.label,labelElement:Object(o.createElement)("kbd",null,e.shortcut),onClick:c(e)})}))}},fi(),$n()],{getPartTopics:function(e){var t=e.layout,n=e.model,o=e.topicKey,r=n.getTopic(o),i=r.subKeys.size,c=r.subKeys.toArray();switch(t){case j.LEFT_TO_RIGHT:return{R:c};case j.RIGHT_TO_LEFT:return{L:c};case j.LEFT_AND_RIGHT:return{L:c.slice(Math.ceil(i/2),i),R:c.slice(0,Math.ceil(i/2))};case j.TOP_TO_BOTTOM:return{B:c}}},createSubTopics:function(e){var t=e.model,n=e.topicKey,o=e.controller,r=e.topics,i=e.saveRef,c=t.getTopic(n);if(0===r.size||c.collapse)return null;var a=[];return r.forEach((function(t){var n=at(at({},e),{topicKey:t,key:t,ref:i(pn(t))});a.push(o.run("renderTopicWidget",n))})),{subTopics:a}},layout:function(e){var t=e.getRef,n=e.model,o=t(dn(n.editorRootTopicKey)),r=t(vn),i=t(xn);o&&o.layout(),r&&r.layout(),i&&i.layout(),function e(o){var r,i;if(o.key!==n.editorRootTopicKey){var c=t(pn(o.key));c&&c.layoutLinks()}if(!o.collapse)try{for(var a=pt(o.subKeys),l=a.next();!l.done;l=a.next()){var u=l.value;e(n.getTopic(u))}}catch(p){r={error:p}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}(n.getTopic(n.editorRootTopicKey))},setLayoutDir:function(e){var t=e.layoutDir,n=e.model;e.controller.change(he.setLayoutDir({model:n,layoutDir:t}))},getRelativeRect:function(e){var t=e.element,n=e.controller,o=e.getRef,r=n.run("getZoomFactor",e);return _n(t,o(gn).bigView,r)},getRelativeRectFromViewPort:function(e){var t=e.element,n=e.controller,o=e.getRef,r=n.run("getZoomFactor",e);return _n(t,o(gn).viewBox,r)},getRelativeVectorFromViewPort:function(e){return Mn(e.element,(0,e.getRef)(gn).viewBox)},addZoomFactorChangeEventListener:function(e){e.controller.run("addTempValueChangeListener",at({key:"ZoomFactor"},e))},removeZoomFactorChangeEventListener:function(e){e.controller.run("removeTempValueChangeListener",at({key:"ZoomFactor"},e))},setZoomFactor:function(e){var t=e.controller,n=e.zoomFactor;return t.run("setTempValue",{key:"ZoomFactor",value:n})},getZoomFactor:function(e){return e.controller.run("getTempValue",{key:"ZoomFactor"})||1},moveTopicToCenter:function(e){var t=e.getRef,n=e.topicKey,o=e.model;if(o.editorRootTopicKey!==n&&fe(o,n,o.editorRootTopicKey)!==H)throw new Error("moveTopicToCenter error: topicKey "+n+" is not the DESCENDANT of editor root topic");var r=t(sn(n)),i=t(gn),c=i.viewBox;if(!r||!c)throw new Error("moveTopicToCenter error: topic or viewBox is null");var a=Mn(r,c);i.setViewBoxScrollDelta(a[0],a[1])},focusTopicAndMoveToCenter:function(e){var t=e.controller,n=e.topicKey;t.run("operation",at(at({},e),{opArray:[{opType:$,topicKey:n,focusMode:z},{opType:J,topicKey:n}],callback:function(){t.run("moveTopicToCenter",at(at({},e),{topicKey:n}))}}))}},Hn(),gi(),Ut(),Bn(),{getValue:function(e,t){var n=e.propKey,o=e.controller;switch(n){case Tn:return 3;case En:return o.run("isOperationEnabled",e);case kn:return o.run("getTopicTitle",e)}return t()}},$e()]}y()("node:Diagram");var vi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.resolveController=Object(b.a)((function(e,n){void 0===e&&(e=[]);var o=n();t.controller=new R({plugins:[e,o],construct:!1,onChange:t.props.onChange})})),t}return ct(t,e),t.prototype.getDiagramProps=function(){return this.controller.run("getDiagramProps")},t.prototype.openNewModel=function(e){var t=this,n=this.getDiagramProps(),o=n.model,r=n.controller;r.run("deleteRefKey",at(at({},n),{topicKey:o.rootTopicKey})),r.run("operation",at(at({},n),{opType:J,topicKey:e.focusKey,model:e,callback:function(){var e=t.getDiagramProps(),n=e.model;r.run("moveTopicToCenter",at(at({},e),{topicKey:n.focusKey}))}}))},t.prototype.render=function(){var e=this.props.plugins;return this.resolveController(e,bi),this.diagramProps=at(at({},this.props),{controller:this.controller}),this.controller.run("renderDiagram",this.diagramProps)},t}(o.Component),xi=n(286),Oi=n.n(xi),Ti=n(157),Ei=n.n(Ti),ki=function(e,t){return(ki=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function wi(e,t){function n(){this.constructor=e}ki(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ci=function(){return(Ci=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};var Si,ji=y()("node:topic-content-editor"),Ri=d.default.div(Si||(Si=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}(["\n  ",";\n"],["\n  ",";\n"])),(function(e){return!e.readOnly&&"\n    // padding: 75px\n    // min-width: 150px\n    // min-height: 150px\n  "})),Ki=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return wi(t,e),t.prototype.initState=function(){e.prototype.initState.call(this);var t=this.props,n=t.controller,o="topic-desc-data-"+t.topicKey,r=this.state.content;n.run("setTempValue",{key:o,value:r})},t.prototype.getCustomizeProps=function(){var e=this.props,t=e.model,n=e.topicKey;return{block:t.getTopic(n).getBlock(P).block,readOnly:t.editingDescKey!==n,getRefKeyFunc:un,placeholder:"write topic notes here"}},t.prototype.onChange=function(e){var t=this.props,n=t.controller,o="topic-desc-data-"+t.topicKey;n.run("setTempValue",{key:o,value:e}),this.setState({content:e})},t}(function(e){function t(t){var n=e.call(this,t)||this;return n.onMouseDown=function(e){e.stopPropagation()},n.onMouseMove=function(e){e.stopPropagation()},n.rootRef=function(e){return function(t){e(t),n.root=t}},n._handleClick=function(e){!n.root.contains(e.target)&&n.onClickOutSide(e)},n.initState(),n}return wi(t,e),t.prototype.initState=function(){this.state={content:this.getContent()}},t.prototype.getContent=function(){return this.getCustomizeProps().block.data},t.prototype.onChange=function(e){this.setState({content:e})},t.prototype.getCustomizeProps=function(){return null},t.prototype.componentDidMount=function(){document.addEventListener("click",this._handleClick)},t.prototype.componentWillUnmount=function(){document.removeEventListener("click",this._handleClick)},t.prototype.onClickOutSide=function(e){},t.prototype.render=function(){var e=this.props,t=e.topicKey,n=e.saveRef,r=this.getCustomizeProps(),i=r.readOnly,c=r.getRefKeyFunc,a=r.placeholder;ji("readOnly:",i);var l=i?this.getContent():this.state.content;if(null==l)return null;var u=c(t),p=this.onMouseDown,s=this.onMouseMove,d={editorValue:l,readOnly:i,onChange:this.onChange.bind(this),placeholder:a},f={key:u,ref:this.rootRef(n(u)),readOnly:i,onMouseDown:p,onMouseMove:s};return Object(o.createElement)(Ri,Ci({},f),Object(o.createElement)(Oi.a,Ci({},d)))},t}(St)),Di=new Ei.a;var Li=function(){return{renderTopicDescEditor:function(e){return Object(o.createElement)(Ki,Ci({},e))},isBlockEmpty:function(e,t){var n=e.block,o=e.controller;return n.type===I||n.type===P?null==n.data||""===o.run("serializeBlockData",e):t()},serializeBlockData:function(e,t){var n=e.block;return n.type===P?"string"===typeof n.data?n.data:Di.serialize(n.data):t()}}},_i=function(){return(_i=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},Mi=y()("plugin:json-serializer");var Ii={name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5",fontSize:"16px"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"36px"},subLinkStyle:{lineType:"curve",lineWidth:"3px"}},primaryTopic:{contentStyle:{fontSize:"24px"},subLinkStyle:{lineType:"curve",lineWidth:"3px"}},normalTopic:{subLinkStyle:{lineType:"curve",lineWidth:"3px"}}},Pi={name:"theme1",randomColor:!1,background:"rgb(250,245,205)",highlightColor:"#50C9CE",marginH:50,marginV:30,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5},rootTopic:{contentStyle:{background:"rgb(221, 170, 68)",color:"#fff",fontSize:"34px",borderRadius:"5px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"2px",lineColor:"rgb(221, 170, 68)"}},primaryTopic:{contentStyle:{background:"#e8eaec",borderWidth:"2px",borderStyle:"solid",borderColor:"rgb(221, 170, 68)",borderRadius:"5px",fontSize:"17px",padding:"10px 15px 10px 15px"},subLinkStyle:{lineType:"curve",lineWidth:"2px",lineColor:"rgb(221, 170, 68)"}},normalTopic:{contentStyle:{background:"#fff",border:"1px solid #e8eaec",borderRadius:"20px",color:"rgb(187, 136, 34)",fontSize:"13px",padding:"4px 10px"},subLinkStyle:{lineType:"round",lineRadius:5,lineWidth:"1px",lineColor:"rgb(187, 136, 34)"}}},zi={name:"theme2",randomColor:!1,background:"#f8f8f8",highlightColor:"#50C9CE",marginH:45,marginV:10,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5},rootTopic:{contentStyle:{background:"#50C18A",color:"#fff",fontSize:"34px",borderRadius:"5px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"2px",lineColor:"#43a9ff"}},primaryTopic:{contentStyle:{background:"#ffffff",borderWidth:"1px",borderStyle:"solid",borderColor:"rgb(221, 170, 68)",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"14px",padding:"6px 10px 5px 10px"},subLinkStyle:{lineType:"round",lineRadius:5,lineWidth:"2px",lineColor:"#43a9ff"}},normalTopic:{contentStyle:{background:"#fff",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"13px",padding:"3px 9px 4px",boxShadow:"1px 1px 1px #ccc"},subLinkStyle:{lineType:"round",lineRadius:5,lineWidth:"1px",lineColor:"#43a9ff"}}},Fi={name:"theme3",randomColor:!1,background:"#A9DEF9",highlightColor:"#50C9CE",marginH:50,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5},rootTopic:{contentStyle:{background:"#FF99C8",color:"#fff",fontSize:"34px",borderRadius:"5px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"2px",lineColor:"#43a9ff"}},primaryTopic:{contentStyle:{background:"#FCF6BD",borderWidth:"1px",borderStyle:"solid",borderColor:"#E4C1F9",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"14px",padding:"6px 10px 5px 10px"},subLinkStyle:{lineType:"curve",lineWidth:"2px",lineColor:"#43a9ff"}},normalTopic:{contentStyle:{background:"#E4FDE1",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"13px",padding:"3px 9px 4px",boxShadow:"1px 1px 1px #ccc"},subLinkStyle:{lineType:"round",lineRadius:5,lineWidth:"1px",lineColor:"#43a9ff"}}},Ni={name:"theme3",randomColor:!1,background:"#CCFBFE",highlightColor:"#50C9CE",marginH:50,marginV:20,contentStyle:{lineHeight:"1.5"},linkStyle:{lineRadius:5},rootTopic:{contentStyle:{background:"#CD8987",color:"#fff",fontSize:"34px",borderRadius:"5px",padding:"16px 18px 16px 18px"},subLinkStyle:{lineType:"curve",lineWidth:"2px",lineColor:"#43a9ff"}},primaryTopic:{contentStyle:{background:"#CDACA1",borderWidth:"1px",borderStyle:"solid",borderColor:"#E4C1F9",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"14px",padding:"6px 10px 5px 10px"},subLinkStyle:{lineType:"line",lineWidth:"2px",lineColor:"#43a9ff"}},normalTopic:{contentStyle:{background:"#CDCACC",borderRadius:"5px",color:"rgb(103,103,103)",fontSize:"13px",padding:"3px 9px 4px",boxShadow:"1px 1px 1px #ccc"},subLinkStyle:{lineType:"line",lineRadius:5,lineWidth:"1px",lineColor:"#43a9ff"}}};var Ai=n(292),Bi=n(20),Vi=n(15),Hi=(n(850),n(29)),Wi=n(65),Gi=n(53),Ui=function(e,t){return(Ui=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Zi(e,t){function n(){this.constructor=e}Ui(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Yi=function(){return(Yi=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function Ji(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function qi(e){var t=e.controller,n=e.model,r=e.topicKey,i=n.focusKey===r&&"FOCUS_MODE_EDITING_TOPOLOGY"===n.focusMode,c=n.getTopic(r).getBlock("TOPOLOGY").block;if(!i&&!c)return null;var a={className:rn("topology"),onClick:function(n){n.stopPropagation(),t.run("operation",Yi(Yi({},e),{opType:"OP_TYPE_START_EDITING_TOPOLOGY"}))},tabIndex:-1};return Object(o.createElement)(Vt,Yi({},a))}var Xi,Qi,$i,ec,tc,nc,oc,rc,ic,cc,ac=[{group:"Basic",children:[{name:"rectangle",icon:"icon-rect",data:{text:"Topology",rect:{width:100,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"rectangle",icon:"\ue64d",iconFamily:"topology",iconColor:"#2f54eb"}},{name:"rectangle",icon:"icon-rectangle",data:{text:"rectangle",rect:{width:200,height:50},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,borderRadius:.1,name:"rectangle"}},{name:"circle",icon:"icon-circle",data:{text:"circle",rect:{width:100,height:100},name:"circle",textMaxLine:1}},{name:"triangle",icon:"icon-triangle",data:{text:"triangle",rect:{width:100,height:100},name:"triangle"}},{name:"diamond",icon:"icon-diamond",data:{text:"diamond",rect:{width:100,height:100},name:"diamond"}},{name:"pentagon",icon:"icon-pentagon",data:{text:"pentagon",rect:{width:100,height:100},name:"pentagon"}},{name:"hexagon",icon:"icon-hexagon",data:{text:"hexagon",rect:{width:100,height:100},paddingTop:10,paddingBottom:10,name:"hexagon"}},{name:"pentagram",icon:"icon-pentagram",data:{text:"pentagram",rect:{width:100,height:100},name:"pentagram"}},{name:"left arrow",icon:"icon-arrow-left",data:{text:"",rect:{width:200,height:100},name:"leftArrow"}},{name:"right arrow",icon:"icon-arrow-right",data:{text:"",rect:{width:200,height:100},name:"rightArrow"}},{name:"bidirectional arrow",icon:"icon-twoway-arrow",data:{text:"",rect:{width:200,height:100},name:"twowayArrow"}},{name:"line",icon:"icon-line",data:{text:"line",rect:{width:100,height:100},name:"line"}},{name:"cloud",icon:"icon-cloud",data:{text:"cloud",rect:{width:100,height:100},name:"cloud"}},{name:"message",icon:"icon-msg",data:{text:"message",rect:{width:100,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"message"}},{name:"file",icon:"icon-file",data:{text:"file",rect:{width:80,height:100},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"file"}},{name:"text",icon:"icon-text",data:{text:"text",rect:{width:160,height:30},name:"text"}},{name:"image",icon:"icon-image",data:{text:"",rect:{width:100,height:100},name:"image",image:"/assets/img/logo.png"}},{name:"cube",icon:"icon-cube",data:{rect:{width:50,height:70},is3D:!0,z:10,zRotate:15,fillStyle:"#ddd",name:"cube",icon:"\ue63c",iconFamily:"topology",iconColor:"#777",iconSize:30}},{name:"people",icon:"icon-people",data:{rect:{width:70,height:100},name:"people"}},{name:"multi media",icon:"icon-pc",data:{text:"multi media",rect:{width:200,height:200},paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,name:"div"}}]},{group:"Flow Graph",children:[{name:"start/end",icon:"icon-flow-start",data:{text:"start",rect:{width:120,height:40},borderRadius:.5,name:"rectangle"}},{name:"flow",icon:"icon-rectangle",data:{text:"flow",rect:{width:120,height:40},name:"rectangle"}},{name:"judgement",icon:"icon-diamond",data:{text:"judgement",rect:{width:120,height:60},name:"diamond"}},{name:"data",icon:"icon-flow-data",data:{text:"data",rect:{width:120,height:50},name:"flowData"}},{name:"prepare",icon:"icon-flow-ready",data:{text:"prepare",rect:{width:120,height:50},name:"hexagon"}},{name:"sub flow",icon:"icon-flow-subprocess",data:{text:"sub flow",rect:{width:120,height:50},name:"flowSubprocess"}},{name:"database",icon:"icon-db",data:{text:"database",rect:{width:80,height:120},name:"flowDb"}},{name:"document",icon:"icon-flow-document",data:{text:"document",rect:{width:120,height:100},name:"flowDocument"}},{name:"internal storage",icon:"icon-internal-storage",data:{text:"internal storage",rect:{width:120,height:80},name:"flowInternalStorage"}},{name:"external storage",icon:"icon-extern-storage",data:{text:"external storage",rect:{width:120,height:80},name:"flowExternStorage"}},{name:"queue",icon:"icon-flow-queue",data:{text:"queue",rect:{width:100,height:100},name:"flowQueue"}},{name:"input manually",icon:"icon-flow-manually",data:{text:"input manually",rect:{width:120,height:80},name:"flowManually"}},{name:"display",icon:"icon-flow-display",data:{text:"display",rect:{width:120,height:80},name:"flowDisplay"}},{name:"parallel",icon:"icon-flow-parallel",data:{text:"parallel",rect:{width:120,height:50},name:"flowParallel"}},{name:"comment",icon:"icon-flow-comment",data:{text:"comment",rect:{width:100,height:100},name:"flowComment"}}]},{group:"Activity Diagram",children:[{name:"start",icon:"icon-inital",data:{text:"",rect:{width:30,height:30},name:"circle",fillStyle:"#555",strokeStyle:"transparent"}},{name:"end",icon:"icon-final",data:{text:"",rect:{width:30,height:30},name:"activityFinal"}},{name:"action",icon:"icon-action",data:{text:"action",rect:{width:120,height:50},borderRadius:.25,name:"rectangle"}},{name:"decision/merge",icon:"icon-diamond",data:{text:"\u51b3\u7b56",rect:{width:120,height:50},name:"diamond"}},{name:"vertical swimming lane",icon:"icon-swimlane-v",data:{text:"vertical swimming lane",rect:{width:200,height:500},name:"swimlaneV"}},{name:"horizontal swimming lane",icon:"icon-swimlane-h",data:{text:"horizontal swimming lane",rect:{width:500,height:200},name:"swimlaneH"}},{name:"vertical fork/merge",icon:"icon-fork-v",data:{text:"",rect:{width:10,height:150},name:"forkV",fillStyle:"#555",strokeStyle:"transparent"}},{name:"horizontal fork/merge",icon:"icon-fork",data:{text:"",rect:{width:150,height:10},name:"forkH",fillStyle:"#555",strokeStyle:"transparent"}}]},{group:"Sequence Diagram && Class Diagram",children:[{name:"lifeline",icon:"icon-lifeline",data:{text:"lifeline",rect:{width:150,height:400},name:"lifeline"}},{name:"activation",icon:"icon-focus",data:{text:"",rect:{width:12,height:200},name:"sequenceFocus"}},{name:"simple class",icon:"icon-simple-class",data:{text:"Topolgoy",rect:{width:270,height:200},paddingTop:40,font:{fontFamily:"Arial",color:"#222",fontWeight:"bold"},fillStyle:"#ffffba",strokeStyle:"#7e1212",name:"simpleClass",children:[{text:"- name: string\n+ setName(name: string): void",name:"text",paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rectInParent:{x:0,y:0,width:"100%",height:"100%",rotate:0},font:{fontFamily:"Arial",color:"#222",textAlign:"left",textBaseline:"top"}}]}},{name:"class",icon:"icon-class",data:{text:"Topolgoy",rect:{width:270,height:200},paddingTop:40,font:{fontFamily:"Arial",color:"#222",fontWeight:"bold"},fillStyle:"#ffffba",strokeStyle:"#7e1212",name:"interfaceClass",children:[{text:"- name: string",name:"text",paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rectInParent:{x:0,y:0,width:"100%",height:"50%",rotate:0},font:{fontFamily:"Arial",color:"#222",textAlign:"left",textBaseline:"top"}},{text:"+ setName(name: string): void",name:"text",paddingLeft:10,paddingRight:10,paddingTop:10,paddingBottom:10,rectInParent:{x:0,y:"50%",width:"100%",height:"50%",rotate:0},font:{fontFamily:"Arial",color:"#222",textAlign:"left",textBaseline:"top"}}]}}]}],lc=d.default.div(Xi||(Xi=Ji(["\n  position: relative;\n  display: flex;\n  width: 100%;\n  height: 100%;\n"],["\n  position: relative;\n  display: flex;\n  width: 100%;\n  height: 100%;\n"]))),uc=d.default.div(Qi||(Qi=Ji(["\n  flex: 1;\n  width: initial;\n  position: relative;\n  overflow: auto;\n  background: #fff;\n"],["\n  flex: 1;\n  width: initial;\n  position: relative;\n  overflow: auto;\n  background: #fff;\n"]))),pc=d.default.div($i||($i=Ji(["\n  flex-shrink: 0;\n  width: 1.75rem;\n  background-color: #f8f8f8;\n  border-right: 1px solid #d9d9d9;\n  overflow-y: auto;\n"],["\n  flex-shrink: 0;\n  width: 1.75rem;\n  background-color: #f8f8f8;\n  border-right: 1px solid #d9d9d9;\n  overflow-y: auto;\n"]))),sc=d.default.div(ec||(ec=Ji(["\n  color: #0d1a26;\n  font-weight: 600;\n  font-size: 0.12rem;\n  padding: 0.05rem 0.1rem;\n  margin-top: 0.08rem;\n  border-bottom: 1px solid #ddd;\n\n  &:first-child {\n    border-top: none;\n  }\n"],["\n  color: #0d1a26;\n  font-weight: 600;\n  font-size: 0.12rem;\n  padding: 0.05rem 0.1rem;\n  margin-top: 0.08rem;\n  border-bottom: 1px solid #ddd;\n\n  &:first-child {\n    border-top: none;\n  }\n"]))),dc=d.default.div(tc||(tc=Ji(["\n  padding: 0.1rem 0;\n  a {\n    display: inline-block;\n    color: @text-color;\n    line-height: 1;\n    width: 0.4rem;\n    height: 0.4rem;\n    text-align: center;\n    text-decoration: none !important;\n\n    .iconfont {\n      font-size: 0.24rem;\n    }\n  }\n"],["\n  padding: 0.1rem 0;\n  a {\n    display: inline-block;\n    color: @text-color;\n    line-height: 1;\n    width: 0.4rem;\n    height: 0.4rem;\n    text-align: center;\n    text-decoration: none !important;\n\n    .iconfont {\n      font-size: 0.24rem;\n    }\n  }\n"]))),fc=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={id:"",data:null,toolsConfig:ac,iconfont:{fontSize:"0.24rem"}},t.canvasOptions={},t.handleContextMenu=function(e){e.preventDefault(),e.stopPropagation()},t.onMessage=function(e,n){var o=(0,t.props.getRef)("TOPOLOGY_DIAGRAM_UTIL");switch(e){case"resize":case"scale":case"locked":t.topology&&o&&o.setCanvasData(t.topology.data)}},t}return Zi(t,e),t.prototype.canvasRegister=function(){Object(Bi.registerNode)("flowData",Vi.flowData,Vi.flowDataAnchors,Vi.flowDataIconRect,Vi.flowDataTextRect),Object(Bi.registerNode)("flowSubprocess",Vi.flowSubprocess,null,Vi.flowSubprocessIconRect,Vi.flowSubprocessTextRect),Object(Bi.registerNode)("flowDb",Vi.flowDb,null,Vi.flowDbIconRect,Vi.flowDbTextRect),Object(Bi.registerNode)("flowDocument",Vi.flowDocument,Vi.flowDocumentAnchors,Vi.flowDocumentIconRect,Vi.flowDocumentTextRect),Object(Bi.registerNode)("flowInternalStorage",Vi.flowInternalStorage,null,Vi.flowInternalStorageIconRect,Vi.flowInternalStorageTextRect),Object(Bi.registerNode)("flowExternStorage",Vi.flowExternStorage,Vi.flowExternStorageAnchors,Vi.flowExternStorageIconRect,Vi.flowExternStorageTextRect),Object(Bi.registerNode)("flowQueue",Vi.flowQueue,null,Vi.flowQueueIconRect,Vi.flowQueueTextRect),Object(Bi.registerNode)("flowManually",Vi.flowManually,Vi.flowManuallyAnchors,Vi.flowManuallyIconRect,Vi.flowManuallyTextRect),Object(Bi.registerNode)("flowDisplay",Vi.flowDisplay,Vi.flowDisplayAnchors,Vi.flowDisplayIconRect,Vi.flowDisplayTextRect),Object(Bi.registerNode)("flowParallel",Vi.flowParallel,Vi.flowParallelAnchors,null,null),Object(Bi.registerNode)("flowComment",Vi.flowComment,Vi.flowCommentAnchors,null,null),Object(Bi.registerNode)("activityFinal",Hi.activityFinal,null,Hi.activityFinalIconRect,Hi.activityFinalTextRect),Object(Bi.registerNode)("swimlaneV",Hi.swimlaneV,null,Hi.swimlaneVIconRect,Hi.swimlaneVTextRect),Object(Bi.registerNode)("swimlaneH",Hi.swimlaneH,null,Hi.swimlaneHIconRect,Hi.swimlaneHTextRect),Object(Bi.registerNode)("forkH",Hi.fork,Hi.forkHAnchors,Hi.forkIconRect,Hi.forkTextRect),Object(Bi.registerNode)("forkV",Hi.fork,Hi.forkVAnchors,Hi.forkIconRect,Hi.forkTextRect),Object(Bi.registerNode)("simpleClass",Wi.simpleClass,null,Wi.simpleClassIconRect,Wi.simpleClassTextRect),Object(Bi.registerNode)("interfaceClass",Wi.interfaceClass,null,Wi.interfaceClassIconRect,Wi.interfaceClassTextRect),Object(Bi.registerNode)("lifeline",Gi.lifeline,Gi.lifelineAnchors,Gi.lifelineIconRect,Gi.lifelineTextRect),Object(Bi.registerNode)("sequenceFocus",Gi.sequenceFocus,Gi.sequenceFocusAnchors,Gi.sequenceFocusIconRect,Gi.sequenceFocusTextRect)},t.prototype.componentDidMount=function(){this.canvasRegister(),this.canvasOptions.on=this.onMessage,this.topology=new Ai.Topology("topology-canvas",this.canvasOptions),this.openData()},t.prototype.componentDidUpdate=function(){this.openData()},t.prototype.openData=function(){var e=this.props,t=e.model,n=e.topicKey,o=t.getTopic(n).getBlock("TOPOLOGY").block;o&&o.data&&""!==o.data&&(this.setState({data:o.data}),this.topology.open(o.data))},t.prototype.onDrag=function(e,t){e.dataTransfer.setData("Text",JSON.stringify(t.data))},t.prototype.renderTools=function(){var e=this;return Object(o.createElement)(pc,null,this.state.toolsConfig.map((function(t,n){return Object(o.createElement)("div",{key:n},Object(o.createElement)(sc,null,t.group),Object(o.createElement)(dc,null,t.children.map((function(t,n){return Object(o.createElement)("a",{key:n,title:t.name,draggable:!0,onDragStart:function(n){e.onDrag(n,t)}},Object(o.createElement)("i",{className:"iconfont "+t.icon,style:e.state.iconfont}))}))))})))},t.prototype.render=function(){return Object(o.createElement)(lc,null,this.renderTools(),Object(o.createElement)(uc,{id:"topology-canvas",onContextMenu:this.handleContextMenu}))},t}(St),yc=d.default.div(nc||(nc=Ji(["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  z-index: 3;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"],["\n  position: absolute;\n  background: white;\n  right: 30px;\n  bottom: 20px;\n  border-radius: 2px;\n  z-index: 3;\n  display: flex;\n  flex-direction: row;\n  user-select: none;\n"]))),mc=Object(d.default)(Ft)(oc||(oc=Ji(["\n  margin: 10px;\n"],["\n  margin: 10px;\n"]))),hc=function(e){return Object(o.createElement)(m.x,{content:e.tooltip,position:g.a.TOP,className:h.a.ICON},Object(o.createElement)(mc,{onClick:e.onClick},e.children))},gc=d.default.span(rc||(rc=Ji(["\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n"],["\n  display: inline-block;\n  width: 80px;\n  height: 18px;\n"]))),bc=function(e){function t(t){var n=e.call(this,t)||this;return n.setCanvasData=function(e){n.setState({canvasData:e})},n.onClickResetZoom=function(e){n.getTopology().scaleTo(1)},n.state={deleteConfirm:!1,canvasData:null},n}return Zi(t,e),t.prototype.getTopology=function(){return(0,this.props.getRef)("TOPOLOGY_DIAGRAM").topology},t.prototype.render=function(){var e=this,t=this.props,n=t.controller,r={isOpen:this.state.deleteConfirm,cancelButtonText:"cancel",onConfirm:function(e){n.run("operation",Yi(Yi({},t),{opType:re,blockType:"TOPOLOGY"}))},onCancel:function(t){e.setState({deleteConfirm:!1})},onClose:function(t){e.setState({deleteConfirm:!1})}},i=this.state.canvasData,c=i?i.scale:1;return Object(o.createElement)(yc,null,Object(o.createElement)(hc,{onClick:this.onClickResetZoom,tooltip:"reset zoom"},Object(o.createElement)(gc,null,"zoom:"+Math.floor(100*c)+"%")),Object(o.createElement)(hc,{onClick:function(t){e.setState({deleteConfirm:!0})},tooltip:"delete this diagram"},cn(nn)),Object(o.createElement)(m.a,Yi({},r),Object(o.createElement)("p",null,"Are you confirm to delete this topology diagram?")))},t}(o.Component),vc=d.default.div(ic||(ic=Ji(["\n  position: relative;\n  overflow: auto;\n  padding: 0px 0px 0px 5px;\n  background: #88888850;\n  height: 100%;\n"],["\n  position: relative;\n  overflow: auto;\n  padding: 0px 0px 0px 5px;\n  background: #88888850;\n  height: 100%;\n"]))),xc=d.default.span(cc||(cc=Ji(["\n  padding: 0px 20px;\n"],["\n  padding: 0px 20px;\n"])));function Oc(e){var t=e.controller,n=e.topicKey,r=e.getRef,i=e.saveRef,c=Yi(Yi({},e),{ref:i("TOPOLOGY_DIAGRAM")}),a=Yi(Yi({},e),{ref:i("TOPOLOGY_DIAGRAM_UTIL")});return Object(o.createElement)(m.i,{title:Object(o.createElement)(xc,null,"Topology Diagram Editor"),icon:cn("topology"),isOpen:!0,hasBackdrop:!0,backdropClassName:"backdrop",backdropProps:{onMouseDown:wn},canOutsideClickClose:!1,isCloseButtonShown:!0,onClose:function(o){o.stopPropagation();var i=r("TOPOLOGY_DIAGRAM").topology.data;t.run("operation",Yi(Yi({},e),{opType:oe,topicKey:n,blockType:"TOPOLOGY",data:i,focusMode:z}))},size:"100%"},Object(o.createElement)(vc,{onClick:wn,onDoubleClick:wn},Object(o.createElement)(fc,Yi({},c)),Object(o.createElement)(bc,Yi({},a))))}function Tc(e){var t=e.model,n=e.topicKey,o=t.getTopic(n).getBlock("TOPOLOGY").block;return null!=o&&null!=o.data||(t=he.setBlockData({model:t,topicKey:n,blockType:"TOPOLOGY",data:""})),t=he.focusTopic({model:t,topicKey:n,focusMode:"FOCUS_MODE_EDITING_TOPOLOGY"})}var Ec=function(){return{renderTopicBlock:function(e,t){var n=e.controller;return"TOPOLOGY"===e.block.type?n.run("renderTopicBlockTopology",e):t()},renderTopicBlockTopology:function(e){return Object(o.createElement)(qi,Yi({},e))},renderDrawer:function(e,t){var n=e.model;if("FOCUS_MODE_EDITING_TOPOLOGY"===n.focusMode){var r=Yi(Yi({},e),{topicKey:n.focusKey,key:"topology-drawer"});return Object(o.createElement)(Oc,Yi({},r))}return t()},customizeTopicContextMenu:function(e,t){var n=e.controller;return Object(o.createElement)(o.Fragment,null,t(),Object(o.createElement)(m.o,null),Object(o.createElement)(m.p,{icon:cn("topology"),text:"Edit Topology Diagram",onClick:function(t){n.run("operation",Yi(Yi({},e),{opType:"OP_TYPE_START_EDITING_TOPOLOGY"}))}}))},getOpMap:function(e,t){var n=t();return n.set("OP_TYPE_START_EDITING_TOPOLOGY",Tc),n}}},kc=n(881),wc=function(e,t){return(wc=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Cc(e,t){function n(){this.constructor=e}wc(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Sc=function(){return(Sc=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function jc(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,i=n.call(e),c=[];try{for(;(void 0===t||t-- >0)&&!(o=i.next()).done;)c.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return c}function Rc(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Kc,Dc,Lc=Object(d.default)(Ht)(Kc||(Kc=Rc(["\n  position: absolute;\n  left: calc(50% - 150px);\n  top: 30px;\n  width: 300px;\n  background: white;\n  padding: 10px;\n  user-select: none;\n"],["\n  position: absolute;\n  left: calc(50% - 150px);\n  top: 30px;\n  width: 300px;\n  background: white;\n  padding: 10px;\n  user-select: none;\n"]))),_c=d.default.div(Dc||(Dc=Rc(["\n  margin-bottom: 10px;\n"],["\n  margin-bottom: 10px;\n"])));function Mc(e){var t=e.zIndex,n=e.controller,r=e.topicKey;return Object(o.createElement)(Lc,{zIndex:t},Object(o.createElement)(_c,null,"Please select the topics you want to reference. After selection, click the confirm button."),Object(o.createElement)(Mt,{justifyContent:"space-around"},Object(o.createElement)(m.d,{onClick:function(t){var o=n.run("getSelectedReferenceKeys",e);n.run("enableOperation",e),n.run("operation",Sc(Sc({},e),{opArray:[{opType:"OP_TYPE_SET_REFERENCE_TOPICS",topicKey:r,referenceKeys:o},{opType:$,topicKey:r,focusMode:z}]})),n.run("clearSelectedReferenceKeys",e)}},"Confirm"),Object(o.createElement)(m.d,{onClick:function(t){n.run("clearSelectedReferenceKeys",e),n.run("enableOperation",e),n.run("operation",Sc(Sc({},e),{opType:ee,focusMode:z}))}},"Cancel")))}var Ic={keyList:Object(x.List)(),dataMap:Object(x.Map)()},Pc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cc(t,e),Object.defineProperty(t.prototype,"keyList",{get:function(){return this.get("keyList")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataMap",{get:function(){return this.get("dataMap")},enumerable:!0,configurable:!0}),t}(Object(x.Record)(Ic)),zc={reference:Object(x.Map)()},Fc=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Cc(t,e),Object.defineProperty(t.prototype,"reference",{get:function(){return this.get("reference")},enumerable:!0,configurable:!0}),t.prototype.getReferenceKeys=function(e){return this.reference.has(e)?this.reference.get(e).keyList.toArray():[]},t.prototype.getReferencedKeys=function(e){var t=[];return this.reference.forEach((function(n,o){n.keyList.includes(e)&&t.push(o)})),t},t}(Object(x.Record)(zc));function Nc(e){var t=e.model,n=e.topicKey,o=e.referenceKeys,r=t.getExtDataItem("TOPIC_REFERENCE",Fc),i=r.reference.get(n)||new Pc;return i=i.set("keyList",Object(x.List)(o)),r=r.setIn(["reference",n],i),t=t.setIn(["extData","TOPIC_REFERENCE"],r)}var Ac,Bc,Vc,Hc=d.default.div(Ac||(Ac=Rc(["\n  display: flex;\n  width: 380px;\n  margin: 10px;\n  justify-content: center;\n  align-items: center;\n"],["\n  display: flex;\n  width: 380px;\n  margin: 10px;\n  justify-content: center;\n  align-items: center;\n"]))),Wc=d.default.div(Bc||(Bc=Rc(["\n  width: 300px;\n  text-decoration: underline;\n  cursor: pointer;\n"],["\n  width: 300px;\n  text-decoration: underline;\n  cursor: pointer;\n"]))),Gc=d.default.div(Vc||(Vc=Rc(["\n  width: 80px;\n"],["\n  width: 80px;\n"])));function Uc(e){var t=e.controller,n=e.refKey,r=e.refType,i=e.removeHandler,c=jc(Object(o.useState)(!1),2),a=c[0],l=c[1],u=t.getValue(kn,Sc(Sc({},e),{topicKey:n,maxLength:100})),p={isOpen:a,cancelButtonText:"cancel",onConfirm:function(e){i(e)},onCancel:function(e){l(!1)},onClose:function(e){l(!1)}};return Object(o.createElement)(Hc,null,Object(o.createElement)(Wc,{onClick:function(o){o.stopPropagation(),t.run("focusTopicAndMoveToCenter",Sc(Sc({},e),{topicKey:n}))}},u),Object(o.createElement)(Gc,null,"reference"===r&&Object(o.createElement)(o.Fragment,null,Object(o.createElement)(m.d,{onClick:function(e){l(!0)}},"Remove"),Object(o.createElement)(m.a,Sc({},p),Object(o.createElement)("p",null,"Are you confirm to remove this reference?")))))}var Zc,Yc,Jc,qc,Xc,Qc=d.default.div(Zc||(Zc=Rc([""],[""]))),$c=d.default.div(Yc||(Yc=Rc(["\n  padding: 10px;\n"],["\n  padding: 10px;\n"]))),ea=d.default.div(Jc||(Jc=Rc(["\n  max-height: 200px;\n  overflow: auto;\n"],["\n  max-height: 200px;\n  overflow: auto;\n"]))),ta=d.default.div(qc||(qc=Rc(["\n  font-size: 20px;\n  color: #106ba3;\n"],["\n  font-size: 20px;\n  color: #106ba3;\n"]))),na=d.default.div(Xc||(Xc=Rc(["\n  text-decoration: underline;\n  color: #106ba3;\n  cursor: pointer;\n"],["\n  text-decoration: underline;\n  color: #106ba3;\n  cursor: pointer;\n"])));function oa(e){var t=e.topicKey,n=e.controller,r=e.model,i=r.extData.get("TOPIC_REFERENCE"),c=i.getReferenceKeys(t),a=0===c.length?null:Object(o.createElement)($c,null,Object(o.createElement)(ta,null,"Reference Topics:"),Object(o.createElement)(ea,null,c.map((function(r){var c,a=Sc(Sc({},e),{key:r,refKey:r,refType:"reference",removeHandler:(c=r,function(o){o.stopPropagation();var r=i.reference.get(t).keyList;n.run("operation",Sc(Sc({},e),{opArray:[{opType:"OP_TYPE_SET_REFERENCE_TOPICS",topicKey:t,focusMode:z,referenceKeys:r.delete(r.indexOf(c)).toArray()}]}))})});return Object(o.createElement)(Uc,Sc({},a))})))),l=i.getReferencedKeys(t),u=0===l.length?null:Object(o.createElement)($c,null,Object(o.createElement)(ta,null,"Referenced Topics:"),Object(o.createElement)(ea,null,l.map((function(t){var n=Sc(Sc({},e),{key:t,refKey:t,refType:"referenced"});return Object(o.createElement)(Uc,Sc({},n))})))),p=r.focusKey!==t&&Object(o.createElement)($c,null,Object(o.createElement)(na,{onClick:function(t){t.stopPropagation(),n.run("focusTopicAndMoveToCenter",e)}},"Goto Origin Topic"));return Object(o.createElement)(Qc,{onMouseDown:wn},a,u,p)}function ra(e){var t=e.model,n=e.topicKey,r=t.extData.get("TOPIC_REFERENCE")||new Fc,i=r.reference.get(n),c=[];if(r.reference.forEach((function(e,t){e.keyList.includes(n)&&c.push(t)})),(null==i||0===i.keyList.size)&&0===c.length)return null;var a={className:rn("reference"),tabIndex:-1},l=Object(o.createElement)(Vt,Sc({},a)),u={autoFocus:!1,content:Object(o.createElement)(oa,Sc({},e)),target:l,interactionKind:m.t.CLICK,hoverOpenDelay:500};return Object(o.createElement)(m.s,Sc({},u))}function ia(e){var t=e.topicKey,n=e.selectedTopicKeys,r=n.has(t),i=jc(Object(o.useState)(r),2),c=i[0],a=i[1],l={checked:c,onChange:function(){n.has(t)?n.delete(t):n.add(t),a(!c)}};return Object(o.createElement)(Nt,Sc({},l))}var ca,aa,la,ua,pa,sa=kc.a.ofType(),da=Object(d.default)(sa)(ca||(ca=Rc(["\n  top: 20%;\n  left: 25% !important;\n  width: 50% !important;\n"],["\n  top: 20%;\n  left: 25% !important;\n  width: 50% !important;\n"]))),fa=d.default.div(aa||(aa=Rc(["\n  margin: 0 5px;\n  padding: 10px 5px;\n  width: 100%;\n  font-size: 16px;\n  cursor: pointer;\n  &:hover {\n    background: #e3e8ec;\n  }\n"],["\n  margin: 0 5px;\n  padding: 10px 5px;\n  width: 100%;\n  font-size: 16px;\n  cursor: pointer;\n  &:hover {\n    background: #e3e8ec;\n  }\n"]))),ya=Object(d.default)(m.s)(la||(la=Rc(["\n  display: block;\n"],["\n  display: block;\n"]))),ma=d.default.div(ua||(ua=Rc(["\n  padding: 10px;\n  font-size: 16px;\n  //max-width: 800px;\n  //max-height: 600px;\n  overflow: auto;\n"],["\n  padding: 10px;\n  font-size: 16px;\n  //max-width: 800px;\n  //max-height: 600px;\n  overflow: auto;\n"]))),ha=d.default.div(pa||(pa=Rc(["\n  white-space: break-spaces;\n"],["\n  white-space: break-spaces;\n"]))),ga={placeholder:"Search"};function ba(e){var t=e.model,n=(e.setSearchWord,e.controller),r=function(t){return function(o){n.run("focusTopicAndMoveToCenter",Sc(Sc({},e),{topicKey:t}))}},i=function(){var o=[];return t.topics.forEach((function(t,r){o.push({key:r,title:n.run("getTopicTitle",Sc(Sc({},e),{topicKey:r}))})})),o}();return Object(o.createElement)(da,{inputProps:ga,itemListPredicate:function(e,t){return t.filter((function(t){return t.title.toLowerCase().includes(e.toLowerCase())}))},isOpen:!0,items:i,itemRenderer:function(e,t){var n=e.key,i=e.title,c=i.length>100,a=c?i.substr(0,100)+"...":i,l={key:n,onClick:r(n)},u=Object(o.createElement)(fa,Sc({},l),a),p={key:n,target:u,content:Object(o.createElement)(ma,null,Object(o.createElement)(ha,null,i)),fill:!0,interactionKind:m.t.HOVER_TARGET_ONLY,hoverOpenDelay:1e3};return c?Object(o.createElement)(ya,Sc({},p)):u},onClose:function(){n.run("operation",Sc(Sc({},e),{opType:ee,focusMode:z}))},resetOnSelect:!0})}n(871);function va(e){return r.a.createElement("div",{className:"bm-toolbar-item ".concat(rn("openfile")),onClick:function(t){var n=e.diagram,o=n.getDiagramProps().controller;Sn(".json,.blinkmind,.bm").then((function(e){var t=JSON.parse(e),r=o.run("deserializeModel",{controller:o,obj:t});n.openNewModel(r)}))}})}function xa(e){var t=[[j.LEFT_AND_RIGHT,"Left And Right","layout-left-and-right"],[j.LEFT_TO_RIGHT,"Only Right","layout-right"],[j.RIGHT_TO_LEFT,"Only Left","layout-left"]];return r.a.createElement("div",{className:tt()("bm-toolbar-item",rn("layout-left-and-right"))},r.a.createElement(m.s,{enforceFocus:!1},r.a.createElement("div",{className:"bm-toolbar-popover-target"}),r.a.createElement(m.n,null,t.map((function(t){return r.a.createElement(m.p,{key:t[1],icon:cn(t[2]),text:t[1],onClick:(n=t[0],function(t){var o=e.diagram.getDiagramProps();o.controller.run("setLayoutDir",Object(Ee.a)(Object(Ee.a)({},o),{},{layoutDir:n}))})});var n})))))}var Oa=n(293),Ta=n.n(Oa),Ea=n(294),ka=n.n(Ea),wa=n(295),Ca=n.n(wa),Sa=n(296),ja=n.n(Sa),Ra=n(297),Ka=n.n(Ra);function Da(e){var t=[["default",Ta.a],["theme1",ka.a],["theme2",Ca.a],["theme3",ja.a],["theme4",Ka.a]];return r.a.createElement("div",{className:tt()("bm-toolbar-item",rn("theme"))},r.a.createElement(m.s,{enforceFocus:!1},r.a.createElement("div",{className:"bm-toolbar-popover-target"}),r.a.createElement("div",{className:"bm-popover-theme"},t.map((function(t){return r.a.createElement("div",{key:t[0],className:"bm-theme-item",onClick:(n=t[0],function(t){var o=e.diagram.getDiagramProps();o.controller.run("setTheme",Object(Ee.a)(Object(Ee.a)({},o),{},{themeKey:n}))})},r.a.createElement("img",{className:"bm-theme-img",src:t[1],alt:t[0]}));var n})))))}function La(e){return r.a.createElement("div",{className:tt()("bm-toolbar-item",rn("export"))},r.a.createElement(m.s,{enforceFocus:!1},r.a.createElement("div",{className:"bm-toolbar-popover-target"}),r.a.createElement(m.n,null,r.a.createElement(m.p,{text:"JSON(.json)",onClick:function(t){var n=e.diagram.getDiagramProps(),o=n.controller,r=n.model,i=o.run("serializeModel",n),c=JSON.stringify(i),a="data:text/plain,".concat(encodeURIComponent(c)),l=o.run("getTopicTitle",Object(Ee.a)(Object(Ee.a)({},n),{},{topicKey:r.rootTopicKey}));!function(e,t){var n=document.createElement("a");n.href=e,n.download=t,n.click()}(a,"".concat(l,".blinkmind"))}}),r.a.createElement(m.o,null))))}function _a(e){return r.a.createElement("div",{className:"bm-toolbar-item ".concat(rn(on)),onClick:function(t){var n=e.diagram.getDiagramProps();n.controller.run("operation",Object(Ee.a)(Object(Ee.a)({},n),{},{opType:ee,focusMode:"FOCUS_MODE_SEARCH"}))}})}var Ma=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.onClickUndo,n=e.onClickRedo,o=e.canUndo,i=e.canRedo;return r.a.createElement("div",{className:"bm-toolbar"},r.a.createElement(va,e),r.a.createElement(La,e),r.a.createElement(Da,e),r.a.createElement(xa,e),r.a.createElement(_a,e),r.a.createElement("div",{className:tt()("bm-toolbar-item",rn("undo"),{"bm-toolbar-item-disabled":!o}),onClick:t}),r.a.createElement("div",{className:tt()("bm-toolbar-item",rn("redo"),{"bm-toolbar-item-disabled":!i}),onClick:n}))}}]),n}(r.a.PureComponent),Ia=(n(872),y()("app"),[Li(),function(){var e=new Map([["default",be],["random-color-square",Ii],["theme1",Pi],["theme2",zi],["theme3",Fi],["theme4",Ni]]);return{getAllThemes:function(t){return e},setTheme:function(e){var t=e.model,n=e.controller,o=e.themeKey,r=n.run("getAllThemes",e);if(!r.has(o))throw new Error("setTheme: the theme key is not correct!");var i=r.get(o),c=he.setTheme({model:t,theme:i});n.change(c)}}}(),function(){var e=new Set;function t(t){var n=t.model,o=t.topicKey,r=n.getExtDataItem("TOPIC_REFERENCE",Fc);return e=new Set(r.getReferenceKeys(o)),n=he.focusTopic({model:n,topicKey:o,focusMode:"FOCUS_MODE_SET_REFERENCE_TOPICS"})}return{customizeTopicContextMenu:function(e,t){var n=e.controller;return Object(o.createElement)(o.Fragment,null,t(),Object(o.createElement)(m.o,null),Object(o.createElement)(m.p,{key:"EXT_KEY_TOPIC_REFERENCE",icon:cn("reference"),text:"Set Reference Topics",onClick:function(t){n.run("operation",Sc(Sc({},e),{opType:"OP_TYPE_START_SET_REFERENCE_TOPICS"})),n.run("disableOperation",Sc(Sc({},e),{whiteList:[U]}))}}))},getOpMap:function(e,n){var o=n();return o.set("OP_TYPE_START_SET_REFERENCE_TOPICS",t),o.set("OP_TYPE_SET_REFERENCE_TOPICS",Nc),o},beforeOpFunction:function(e,t){var n=t(),o=e.opType,r=e.topicKey;if(o===Q&&r!==n.editorRootTopicKey){var i=de(n,r);i.push(r);var c=n.getExtDataItem("TOPIC_REFERENCE",Fc),a=c.reference;i.forEach((function(e){var t=c.getReferencedKeys(e);(a=a.withMutations((function(n){t.forEach((function(t){n.updateIn([t,"keyList"],(function(t){return t.delete(t.indexOf(e))}))}))}))).has(e)&&(a=a.delete(e))})),c=c.set("reference",a),n=n.setIn(["extData","TOPIC_REFERENCE"],c)}return n},renderDiagramCustomize:function(e,t){var n=e.model,r=e.controller.getValue(Tn)+2,i=t();if("FOCUS_MODE_SET_REFERENCE_TOPICS"===n.focusMode){var c=Sc(Sc({},e),{zIndex:r,topicKey:n.focusKey,key:"AddReferenceTopicPanel"});i.push(Object(o.createElement)(Mc,Sc({},c)))}return i},renderTopicContentOthers:function(t,n){var r=t.model,i=t.topicKey,c=t.controller,a=n();if(a.push(c.run("renderTopicExtReference",Sc(Sc({},t),{key:"EXT_KEY_TOPIC_REFERENCE-icon"}))),"FOCUS_MODE_SET_REFERENCE_TOPICS"===r.focusMode&&r.focusKey!==i){var l=Sc(Sc({},t),{key:"checkbox",selectedTopicKeys:e}),u=Object(o.createElement)(ia,Sc({},l));a.push(u)}return a},renderTopicExtReference:function(e,t){return Object(o.createElement)(ra,Sc({},e))},clearSelectedReferenceKeys:function(){e.clear()},getSelectedReferenceKeys:function(){return Array.from(e)},deserializeExtDataItem:function(e,t){var n=e.extDataKey,o=e.extDataItem;if("TOPIC_REFERENCE"===n){var r=new Fc,i=function(e){var t=o.reference[e],n=new Pc({keyList:Object(x.List)(t.keyList),dataMap:Object(x.Map)(t.dataMap)});r=r.update("reference",(function(t){return t.set(e,n)}))};for(var c in o.reference)i(c);return r}return t()}}}(),function(){var e=function(e){};return{customizeHotKeys:function(e,t){var n=e.controller,o=e.model,r=t();return r.globalHotKeys.set("DEFAULT_SEARCH",{label:"search",combo:"ctrl + f",onKeyDown:function(){n.run("operation",Sc(Sc({},e),{opType:$,topicKey:o.focusKey,focusMode:"FOCUS_MODE_SEARCH"}))}}),r},renderDiagramCustomize:function(t,n){var r=n();if("FOCUS_MODE_SEARCH"===t.model.focusMode){var i=Sc(Sc({key:"search-panel"},t),{setSearchWorld:e});r.push(Object(o.createElement)(ba,Sc({},i)))}return r}}}(),Ec(),{serializeModel:function(e,t){var n=t();if(null!=n)return n;var o=e.model,r=e.controller;return{rootTopicKey:o.rootTopicKey,editorRootTopicKey:o.editorRootTopicKey,focusKey:o.focusKey,extData:r.run("serializeExtData",_i(_i({},e),{extData:o.extData})),topics:o.topics.valueSeq().toArray().map((function(t){return r.run("serializeTopic",_i(_i({},e),{topic:t}))})),config:r.run("serializeConfig",_i(_i({},e),{config:o.config})),formatVersion:o.formatVersion}},deserializeModel:function(e,t){var n=t();if(null!=n)return n;var o=e.obj,r=e.controller;null==o.formatVersion&&(o.formatVersion="0.0");var i=o.rootTopicKey,c=o.editorRootTopicKey,a=o.focusKey,l=o.topics,u=o.config,p=o.extData,s=o.formatVersion,d=new Te;return null==(d=d.merge({rootTopicKey:i,editorRootTopicKey:null==c?i:c,focusKey:a,extData:r.run("deserializeExtData",_i(_i({},e),{extData:p,formatVersion:s})),config:r.run("deserializeConfig",_i(_i({},e),{config:u,formatVersion:s})),topics:r.run("deserializeTopics",_i(_i({},e),{topics:l,formatVersion:s})),formatVersion:o.formatVersion})).focusKey&&(d=d.set("focusKey",d.rootTopicKey)),null==d.focusMode&&(d=d.set("focusMode",z)),Mi("deserializeModel",d),d},serializeExtData:function(e,t){var n=t();if(null!=n)return n;var o=e.extData,r=e.controller,i={};return o.forEach((function(t,n){i[n]=r.run("serializeExtDataItem",{props:e,extDataKey:n,extDataItem:t})})),i},deserializeExtData:function(e,t){var n=t();if(null!=n)return n;var o=e.extData,r=e.controller,i=Object(x.Map)();for(var c in o)i=i.set(c,r.run("deserializeExtDataItem",_i(_i({},e),{extDataKey:c,extDataItem:o[c]})));return i},serializeExtDataItem:function(e,t){var n=t();if(null!=n)return n;var o=e.extDataItem;return Object(x.isImmutable)(o)?o.toJS():o},deserializeExtDataItem:function(e,t){var n=t();return null!=n?n:e.extDataItem},serializeConfig:function(e,t){var n=t();return null!=n?n:e.config.toJS()},deserializeConfig:function(e,t){var n=t();if(null!=n)return n;var o=e.config;return new xe(o)},serializeTopic:function(e,t){var n=t();if(null!=n)return n;var o=e.topic,r=e.controller;return{key:o.key,parentKey:o.parentKey,subKeys:o.subKeys.toArray(),collapse:o.collapse,style:o.style,blocks:o.blocks.map((function(t){return r.run("serializeBlock",_i(_i({},e),{block:t}))}))}},deserializeTopic:function(e,t){var n=t();if(null!=n)return n;var o=e.topic,r=e.controller,i=o.key,c=o.parentKey,a=o.subKeys,l=o.blocks,u=o.style,p=o.collapse,s=new se;return s=s.merge({key:i,parentKey:c,subKeys:Object(x.List)(a),style:u,collapse:p,blocks:r.run("deserializeBlocks",_i(_i({},e),{blocks:l}))})},deserializeTopics:function(e,t){var n=t();if(null!=n)return n;var o=e.topics,r=e.controller,i=Object(x.Map)();return i=i.withMutations((function(t){o.forEach((function(n){return t.set(n.key,r.run("deserializeTopic",_i(_i({},e),{topic:n})))}))}))},serializeBlock:function(e,t){var n=t();if(null!=n)return n;var o=e.block,r=e.controller;return{type:o.type,data:r.run("serializeBlockData",_i({},e))}},serializeBlockData:function(e,t){var n=t();return null!=n?n:e.block.data},deserializeBlock:function(e,t){var n=t();if(null!=n)return n;var o=e.block,r=e.controller,i=o.type;return new pe({type:i,data:r.run("deserializeBlockData",_i(_i({},e),{block:o}))})},deserializeBlockData:function(e,t){var n=t();return null!=n?n:e.block.data},deserializeBlocks:function(e,t){var n=t();if(null!=n)return n;var o=e.blocks,r=e.controller,i=Object(x.List)();return i=i.withMutations((function(t){o.forEach((function(n){return t.push(r.run("deserializeBlock",_i(_i({},e),{block:n})))}))}))}}]),Pa=function(e){Object(u.a)(n,e);var t=Object(p.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).diagramRef=function(e){o.diagram=e,o.setState({})},o.onClickUndo=function(e){var t=o.diagram.getDiagramProps();t.controller.run("undo",t)},o.onClickRedo=function(e){var t=o.diagram.getDiagramProps();t.controller.run("redo",t)},o.onChange=function(e,t){o.setState({model:e},t)},o.initModel(),o}return Object(l.a)(n,[{key:"initModel",value:function(){var e=Te.create({rootTopicKey:"ce8526e2-816e-4dc1-8c35-4925d9f9ca51",editorRootTopicKey:"ce8526e2-816e-4dc1-8c35-4925d9f9ca51",focusKey:"023d497b-a52e-40bb-940e-48a1824bf1ec",extData:{TOPIC_REFERENCE:{reference:{}}},topics:[{key:"ce824433-bb10-421d-939a-6f633651ecf1",parentKey:"a5629588-5712-4ff6-88e5-e39d0984e2b9",subKeys:[],collapse:!1,style:'{"contentStyle":{"background":"#b6adae"}}',blocks:[{type:"CONTENT",data:"Explore concrete\nexamples"}]},{key:"ce8526e2-816e-4dc1-8c35-4925d9f9ca51",parentKey:null,subKeys:["023d497b-a52e-40bb-940e-48a1824bf1ec","153751ed-3a72-4136-8576-b34c34c2b3d1","630c5336-cd8b-48d7-887f-109f9e1f404b","a5629588-5712-4ff6-88e5-e39d0984e2b9","a915244e-ded5-43e6-a7c8-cbdc60f8e82f"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"DSA"}]},{key:"630c5336-cd8b-48d7-887f-109f9e1f404b",parentKey:"ce8526e2-816e-4dc1-8c35-4925d9f9ca51",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Algorithms"},{type:"DESC",data:"**Algorithm **is a process or set of steps to accomplish a certain task.\n\n| **Algorithms** | **Programs** |\n|:---:|:---:|\n| It is a step\\-by\\-step procedure for solving the problem | It is the implementation in \u201ccode\u201d that instructs the computer how to execute the algorithm. |\n"}]},{key:"8a763c54-a7f0-403c-95ab-f3d45e82b3f0",parentKey:"023d497b-a52e-40bb-940e-48a1824bf1ec",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Space complexity"}]},{key:"153751ed-3a72-4136-8576-b34c34c2b3d1",parentKey:"ce8526e2-816e-4dc1-8c35-4925d9f9ca51",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Data\nStructures"}]},{key:"10e19250-68fb-4c0d-adcf-0d09d059f9a0",parentKey:"a915244e-ded5-43e6-a7c8-cbdc60f8e82f",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Frequency counter\npattern"}]},{key:"023d497b-a52e-40bb-940e-48a1824bf1ec",parentKey:"ce8526e2-816e-4dc1-8c35-4925d9f9ca51",subKeys:["7c8d779f-8730-4a23-a7d9-368ee2da0f66","8a763c54-a7f0-403c-95ab-f3d45e82b3f0"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Big O Notation"},{type:"DESC",data:"**Big O notation** is used to describe the **_performance_** or** ****_complexity_**** **of an algorithm. Big O specifically describes the worst\\-case scenario, and can be used to describe the execution time required or the space used \\(e.g. in memory or on disk\\) by an algorithm.\n\n_Common notations:_\n1. Omega\\(\u03a9\\)\n1. Theta \\(\u03b8\\)\n1. Omicron\\(O\\) or Big O\n\n"}]},{key:"a915244e-ded5-43e6-a7c8-cbdc60f8e82f",parentKey:"ce8526e2-816e-4dc1-8c35-4925d9f9ca51",subKeys:["10e19250-68fb-4c0d-adcf-0d09d059f9a0","07e17ca6-badb-46b8-aee4-87d608152c7a"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Problem solving\npatterns"}]},{key:"07e17ca6-badb-46b8-aee4-87d608152c7a",parentKey:"a915244e-ded5-43e6-a7c8-cbdc60f8e82f",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Multi pointer\npattern"}]},{key:"aca84290-cc11-4438-87fe-b92d95b1bd6a",parentKey:"a5629588-5712-4ff6-88e5-e39d0984e2b9",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Solve /\nSimplify"}]},{key:"0651eb64-886b-4476-9b1a-e330522b0f1c",parentKey:"a5629588-5712-4ff6-88e5-e39d0984e2b9",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Breat it\ndown"}]},{key:"d86fb1db-1080-4339-9216-b61ad91acaf5",parentKey:"a5629588-5712-4ff6-88e5-e39d0984e2b9",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Refractor"}]},{key:"54e0233a-5759-4284-846c-9d5b976745ed",parentKey:"a5629588-5712-4ff6-88e5-e39d0984e2b9",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Understanding\nProblem"},{type:"DESC",data:"## Understand the problem\n\n* Can I restate the problem in my own words ?\n* What are the inputs that go into the problem ?\n* What are the outputs that should come from the solution to the problem ?\n* Can the outputs be determined from the inputs ? Do I have enough info to solve the problem ?\n* How should I label the important pieces of data that are a part of the problem ?\n\n"}]},{key:"7c8d779f-8730-4a23-a7d9-368ee2da0f66",parentKey:"023d497b-a52e-40bb-940e-48a1824bf1ec",subKeys:[],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Time complexity"}]},{key:"a5629588-5712-4ff6-88e5-e39d0984e2b9",parentKey:"ce8526e2-816e-4dc1-8c35-4925d9f9ca51",subKeys:["54e0233a-5759-4284-846c-9d5b976745ed","ce824433-bb10-421d-939a-6f633651ecf1","0651eb64-886b-4476-9b1a-e330522b0f1c","aca84290-cc11-4438-87fe-b92d95b1bd6a","d86fb1db-1080-4339-9216-b61ad91acaf5"],collapse:!1,style:null,blocks:[{type:"CONTENT",data:"Problem Solving\napproach"},{type:"DESC",data:""}]}],config:{readOnly:!1,allowUndo:!0,layoutDir:2,theme:{name:"default",randomColor:!0,background:"rgb(57,60,65)",highlightColor:"#50C9CE",marginH:60,marginV:20,contentStyle:{lineHeight:"1.5",fontSize:"16px"},linkStyle:{lineRadius:5,lineType:"curve",lineWidth:"3px"},rootTopic:{contentStyle:{fontSize:"36px"},subLinkStyle:{lineType:"curve",lineWidth:"3px"}},primaryTopic:{contentStyle:{fontSize:"24px"},subLinkStyle:{lineType:"curve",lineWidth:"3px"}},normalTopic:{subLinkStyle:{lineType:"curve",lineWidth:"3px"}}}},formatVersion:"0.0"});this.state={model:e}}},{key:"renderDiagram",value:function(){return r.a.createElement(vi,{ref:this.diagramRef,model:this.state.model,onChange:this.onChange,plugins:Ia})}},{key:"renderToolbar",value:function(){var e=this.diagram.getDiagramProps(),t=e.controller,n=t.run("canUndo",e),o=t.run("canRedo",e),i={diagram:this.diagram,onClickUndo:this.onClickUndo,onClickRedo:this.onClickRedo,canUndo:n,canRedo:o};return r.a.createElement(Ma,i)}},{key:"render",value:function(){return r.a.createElement("div",{className:"mindmap"},this.diagram&&this.renderToolbar(),this.renderDiagram())}}]),n}(r.a.Component);n(873);var za=function(){return r.a.createElement(Pa,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));localStorage.debug=["app","plugin:layout"].join(","),c.a.render(r.a.createElement(za,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}}]);
//# sourceMappingURL=chunk-blinkmind.7f069ec1.chunk.js.map